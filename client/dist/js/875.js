(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[875],{92535:function(t,e,r){"use strict";r.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseModal2",{attrs:{title:t.title||t.$t("export")},on:{close:function(e){return t.$emit("close")}}},[r("div",{staticClass:"_cont"},[r("div",{staticClass:"u-spacingBottom"},[t._t("default")],2),r("div",{},[r("div",{staticClass:"u-sameRow"},[r("a",{staticClass:"u-buttonLink",attrs:{disabled:!t.export_href,download:t.export_name,href:t.export_href,target:"_blank"}},[t._v(" "+t._s(t.$t("download"))+" ")]),r("button",{staticClass:"u-button u-button_red",attrs:{type:"button"},on:{click:t.saveToProject}},[r("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[r("path",{staticStyle:{fill:"var(--c-rouge)"},attrs:{d:"M84,0C37.6,0,0,37.6,0,84c0,46.4,37.6,84,84,84c46.4,0,84-37.6,84-84 C168,37.6,130.4,0,84,0z"}}),r("g",{staticStyle:{fill:"var(--c-orange)"}},[r("path",{attrs:{d:"m42 42h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m73.2 42h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m104.4 42h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m42 73.5h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m73.2 73.5h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m104.4 73.5h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m42 105h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m73.2 105h21.6v21h-21.6z"}}),r("path",{attrs:{d:"m104.4 105h21.6v21h-21.6z"}})])]),t._v(" "+t._s(t.$t("save_to_project"))+" ")])])]),t.finished_saving_to_project?r("div",{staticClass:"_saveNotice"},[t._v(" "+t._s(t.$t("media_was_saved"))+" ")]):t._e()])])},s=[],i={props:{title:String,export_name:{type:String,default:"file"},export_blob:[Boolean,Blob],project_path:String},components:{},data(){return{finished_saving_to_project:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{export_href(){return!!this.export_blob&&window.URL.createObjectURL(this.export_blob)}},methods:{async saveToProject(){const t={};await this.$api.uploadFile({path:this.project_path,filename:this.export_name,file:this.export_blob,additional_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t})),this.finished_saving_to_project=!0,setTimeout((()=>{this.$emit("close")}),3e3)}}},o=i,a=(r(90741),r(1001)),l=(0,a.Z)(o,n,s,!1,null,"c491e50e",null),c=l.exports},37875:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"_trimAudio"},[r("div",{staticClass:"_btnRow"},[r("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.play}},[r("b-icon",{attrs:{icon:"play-circle-fill"}}),t._v(" "+t._s(t.$t("play"))+" ")],1),r("button",{staticClass:"u-button u-button_orange",attrs:{type:"button"},on:{click:t.pause}},[r("b-icon",{attrs:{icon:"pause-circle"}}),t._v(" "+t._s(t.$t("pause"))+" ")],1)]),r("div",{ref:"playlist",staticClass:"_wfp"}),r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"playlistPreview"}),t.selection_is_ready?r("div",[r("div",{staticClass:"u-sameRow _extract"},[r("span",[t._v(" "+t._s(t.$t("extract_to_export"))+" ")]),r("input",{attrs:{type:"text",readonly:""},domProps:{value:t.selection.start}}),r("b-icon",{attrs:{icon:"arrow-right-circle"}}),r("input",{attrs:{type:"text",readonly:""},domProps:{value:t.selection.end}})],1),r("div",{staticClass:"u-sameRow _submit"},[r("button",{staticClass:"u-button u-button_bleumarine",attrs:{type:"button"},on:{click:function(e){t.show_save_export_modal=!0}}},[r("b-icon",{attrs:{icon:"check"}}),t._v(" "+t._s(t.$t("submit"))+" ")],1)])]):r("div",[r("br"),r("p",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("trim_instructions"))+" ")])]),t.show_save_export_modal?r("ExportSaveMakeModal",{attrs:{export_blob:t.export_blob,export_name:t.export_name,project_path:t.project_path},on:{close:function(e){t.show_save_export_modal=!1}}},[t.export_src_url?r("audio",{staticClass:"_player",attrs:{src:t.export_src_url,controls:""}}):t._e()]):t._e()],1)},s=[],i=r(47010),o=r.n(i),a=r(92535),l={props:{make:Object,project_path:String,base_media:Object},components:{ExportSaveMakeModal:a.Z},data(){return{main_wfpl:void 0,current_time:void 0,selection:{start:this.make.selection?.start||0,end:this.make.selection?.end||0},is_rendering:!1,show_save_export_modal:!1,debounce_selection:void 0,export_blob:!1,export_src_url:!1,export_duration:""}},created(){},async mounted(){await this.loadWFP()},beforeDestroy(){},watch:{show_save_export_modal(){this.show_save_export_modal&&this.$nextTick((()=>{this.renderAudio()}))},"make.selection":{handler(){this.setSelect()},deep:!0}},computed:{export_name(){return this.base_media.$media_filename+"_trim.wav"},selection_is_ready(){return this.selection.start&&this.selection.end&&this.selection.start!==this.selection.end},base_media_url(){return this.makeMediaFileURL({$path:this.base_media.$path,$media_filename:this.base_media.$media_filename})}},methods:{async loadWFP(){this.main_wfpl=o()({samplesPerPixel:512,container:this.$refs.playlist,state:"select",timescale:!0,isAutomaticScroll:!0,zoomLevels:[512,1024,2048,4096],states:{cursor:!1,fadein:!1,fadeout:!1,select:!0,shift:!1},controls:{show:!0,width:150,widgets:{muteOrSolo:!1,volume:!0,stereoPan:!1,collapse:!1,remove:!1}}}),await this.main_wfpl.load([{src:this.base_media_url,name:this.base_media.$media_filename,selected:{start:this.selection.start,end:this.selection.end}}]),this.setListener()},play(){this.main_wfpl.getEventEmitter().emit("play")},pause(){this.main_wfpl.getEventEmitter().emit("pause")},setListener(){this.main_wfpl.getEventEmitter().on("timeupdate",this.timeUpdate),this.main_wfpl.getEventEmitter().on("select",this.select)},timeUpdate(t){this.current_time=this.formatDurationToHoursMinutesSeconds(t)},roundVal(t){return Number.parseFloat(t.toFixed(2))},select(t,e){this.selection.start=this.roundVal(t),this.selection.end=this.roundVal(e),this.debounce_selection&&clearTimeout(this.debounce_selection),this.debounce_selection=setTimeout((async()=>{await this.$api.updateMeta({path:this.make.$path,new_meta:{selection:this.selection}})}),1e3)},setSelect(){const{start:t,end:e}=this.make.selection;t===this.selection.start&&e===this.selection.end||this.main_wfpl.getEventEmitter().emit("select",t,e)},audiorenderingstarting(){this.is_rendering=!0},audiorenderingfinished(t,e){this.is_rendering=!1,this.export_blob=e;const r=new FileReader;r.onload=t=>{this.export_src_url=t.target.result},r.readAsDataURL(e)},async renderAudio(){this.export_blob=!1,this.export_src_url=!1,this.export_duration="",this.main_wfpl.getEventEmitter().emit("stop");const t=o()({container:this.$refs.playlistPreview});await t.load([{src:this.base_media_url,name:this.base_media.$media_filename,selected:{start:this.selection.start,end:this.selection.end}}]),t.getEventEmitter().on("audiorenderingstarting",this.audiorenderingstarting),t.getEventEmitter().on("audiorenderingfinished",this.audiorenderingfinished),t.initExporter(),t.getEventEmitter().emit("trim"),t.getEventEmitter().emit("shift",-this.selection.start,t.tracks[0]);const e=this.selection.end-this.selection.start;t.duration=e,this.export_duration=this.roundVal(e),t.getEventEmitter().emit("startaudiorendering","wav")}}},c=l,u=(r(77203),r(9243),r(1001)),h=(0,u.Z)(c,n,s,!1,null,"66b965aa",null),d=h.exports},32742:function(t,e,r){"use strict";r.r(e);var n=r(8081),s=r.n(n),i=r(23645),o=r.n(i),a=o()(s());a.push([t.id,"._cont[data-v-c491e50e]{position:relative}._saveNotice[data-v-c491e50e]{position:absolute;inset:-2px;background:hsla(0,0%,100%,.95);display:flex;justify-content:center;align-items:center}",""]),e["default"]=a},43238:function(t,e,r){"use strict";r.r(e);var n=r(8081),s=r.n(n),i=r(23645),o=r.n(i),a=o()(s());a.push([t.id,"._trimAudio[data-v-66b965aa]{position:relative;width:100%;height:auto;background:#fff;padding:calc(var(--spacing)*1)}._wfp[data-v-66b965aa]{position:relative}._btnRow[data-v-66b965aa],._wfp[data-v-66b965aa]{box-shadow:0 1px 4px rgba(0,0,0,.2)}._btnRow[data-v-66b965aa]{display:flex;flex-flow:row wrap;gap:calc(var(--spacing)/4);align-items:center;width:100%;background:#fff;border-radius:2px;margin:0 auto calc(var(--spacing)/1)}._extract[data-v-66b965aa]{margin:calc(var(--spacing)*1) auto}._extract input[data-v-66b965aa]{width:10ch}._submit[data-v-66b965aa]{margin:calc(var(--spacing)*1) auto}._player[data-v-66b965aa]{display:block;width:100%;height:auto;min-height:40px}",""]),e["default"]=a},3129:function(t,e,r){"use strict";r.r(e);var n=r(8081),s=r.n(n),i=r(23645),o=r.n(i),a=o()(s());a.push([t.id,':root{--wp-controls-border-color:var(--c-gris);--wp-controls-background-color:#fff;--wp-mute-solo-color:#343a40;--wp-mute-solo-hover-color:#fff;--wp-mute-solo-focus-color:rgba(52,58,64,.5);--wp-btn-danger-background-hover-color:#c82333;--wp-btn-danger-border-hover-color:#bd2130;--wp-btn-danger-background-color:#dc3545;--wp-btn-danger-border-color:#dc3545;--wp-btn-danger-focus-color:rgba(225,83,97,.5);--wp-btn-danger-color:#fff;--wp-btn-info-background-hover-color:#138496;--wp-btn-info-border-hover-color:#117a8b;--wp-btn-info-background-color:#17a2b8;--wp-btn-info-border-color:#17a2b8;--wp-btn-info-focus-color:rgba(58,176,195,.5);--wp-btn-info-color:#fff;--wp-fade-background-color:rgba(0,0,0,.1);--wp-channel-color:#ffd500;--wp-channel-progress-color:#fbbc04;--wp-cursor-color:#000;--wp-selection-background-color:rgba(0,0,0,.1);--wp-selection-point-color:red;--wp-tracks-container-background-color:#005bbb;--wp-range-slider-label-color:#fff;--wp-range-slider-color:#daa520;--wp-range-slider-focus-color:#000;--wp-range-slider-background-color:#ddd;--wp-range-slider-background-focus-color:#bbb;--wp-annotation-box-border-color:grey;--wp-annotation-current-background-color:#ebf4f6;--wp-annotation-icon-hover-color:orange}.playlist{margin:0 0}.playlist *,.playlist :after,.playlist :before{box-sizing:border-box}.playlist .btn:not(:disabled){cursor:pointer}.playlist .btn{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.playlist .btn-outline-dark{color:var(--wp-mute-solo-color);border-color:var(--wp-mute-solo-color)}.playlist .btn-outline-dark:hover{color:var(--wp-mute-solo-hover-color);background-color:var(--wp-mute-solo-color);border-color:var(--wp-mute-solo-color)}.playlist .btn-outline-dark:active:focus,.playlist .btn-outline-dark:focus{box-shadow:0 0 0 .2rem var(--wp-mute-solo-focus-color)}.playlist .btn-danger{color:var(--wp-btn-danger-color);background-color:var(--wp-btn-danger-background-color);border-color:var(--wp-btn-danger-border-color)}.playlist .btn-danger:hover{color:var(--wp-btn-danger-color);background-color:var(--wp-btn-danger-background-hover-color);border-color:var(--wp-btn-danger-border-hover-color)}.playlist .btn-danger:active:focus,.playlist .btn-danger:focus{box-shadow:0 0 0 .2rem var(--wp-btn-danger-focus-color)}.playlist .btn-info{color:var(--wp-btn-info-color);background-color:var(--wp-btn-info-background-color);border-color:var(--wp-btn-info-border-color)}.playlist .btn-info:hover{color:var(--wp-btn-info-color);background-color:var(--wp-btn-info-background-hover-color);border-color:var(--wp-btn-info-border-hover-color)}.playlist .btn-info:active:focus,.playlist .btn-info:focus{box-shadow:0 0 0 .2rem var(--wp-btn-info-focus-color)}.playlist .btn-xs{padding:.25rem .4rem;font-size:.875rem;line-height:.5;border-radius:.2rem}.playlist .btn-group{margin-bottom:.3rem}.playlist .btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.playlist .btn-group>.btn:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.playlist .playlist-time-scale{height:30px}.playlist .playlist-tracks{background:var(--wp-tracks-container-background-color)}.playlist .channel{background:var(--wp-channel-color)}.playlist .channel-progress{background:var(--wp-channel-progress-color)}.playlist .cursor{background:var(--wp-cursor-color)}.playlist .wp-fade{background-color:var(--wp-fade-background-color)}.playlist .state-cursor,.playlist .state-select{cursor:text}.playlist .state-fadein{cursor:w-resize}.playlist .state-fadeout{cursor:e-resize}.playlist .state-shift{cursor:ew-resize}.playlist .selection.point{background:var(--wp-selection-point-color)}.playlist .selection.segment{background:var(--wp-selection-background-color)}.playlist .channel-wrapper.silent .channel{opacity:.3}.playlist .controls{background:var(--wp-controls-background-color);text-align:center;border:2px solid var(--wp-controls-border-color);border-radius:2px}.playlist .controls .track-header{overflow:hidden;height:26px;display:flex;align-items:center;justify-content:space-between;padding:0 .2rem;font-size:.75rem}.playlist .controls .track-header button{width:20px;height:20px;display:flex;align-items:center;justify-content:center}.playlist .controls label{width:100%;display:flex;justify-content:space-between;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0);padding:0 1rem;margin-bottom:.2rem}.playlist .controls label:before{color:var(--wp-range-slider-label-color);font-size:18px;padding-right:5px;-moz-osx-font-smoothing:grayscale}.playlist .controls label:after{color:var(--wp-range-slider-label-color);font-size:18px;padding-left:5px}.playlist .controls label.volume:before{content:"\\f027"}.playlist .controls label.volume:after{content:"\\f028"}.playlist .controls label.stereopan:before{content:"L"}.playlist .controls label.stereopan:after{content:"R"}.playlist .controls input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:inline-block;width:75%}.playlist .controls input[type=range]::-webkit-slider-runnable-track{height:5px;background:var(--wp-range-slider-background-color);border:none;border-radius:3px}.playlist .controls input[type=range]::-moz-range-track{height:5px;background:var(--wp-range-slider-background-color);border:none;border-radius:3px}.playlist .controls input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:12px;width:12px;border-radius:50%;background:var(--wp-range-slider-color);margin-top:-5px;cursor:ew-resize}.playlist .controls input[type=range]::-moz-range-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:12px;width:12px;border-radius:50%;background:var(--wp-range-slider-color);margin-top:-5px;cursor:ew-resize}.playlist .controls input[type=range]:focus{outline:none}.playlist .controls input[type=range]:focus::-webkit-slider-runnable-track{background:var(--wp-range-slider-background-focus-color)}.playlist .controls input[type=range]:focus::-moz-range-track{background:var(--wp-range-slider-background-focus-color)}.playlist .controls input[type=range]:focus::-webkit-slider-thumb{border:2px solid var(--wp-range-slider-focus-color)}.playlist .controls input[type=range]:focus::-moz-range-thumb{border:2px solid var(--wp-range-slider-focus-color)}.playlist .annotations .annotations-boxes{text-align:center}.playlist .annotations .annotation-box{border:2px dashed var(--wp-annotation-box-border-color);padding:0 10px;line-height:1.5}.playlist .annotations .annotation-box .resize-handle{background:var(--wp-annotation-box-border-color);opacity:.3;cursor:ew-resize}.playlist .annotations .annotation-box .id{cursor:pointer;display:inline-block;width:100%;height:100%}.playlist .annotations .annotations-text{font-size:19px;font-weight:300;margin-top:1em;height:160px;overflow-x:hidden;overflow-y:auto}.playlist .annotations .annotations-text .annotation{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch}.playlist .annotations .annotations-text .annotation span{margin:.3rem .6rem}.playlist .annotations .annotations-text .annotation span:last-of-type{margin-right:1.2rem}.playlist .annotations .annotations-text .annotation .annotation-end,.playlist .annotations .annotations-text .annotation .annotation-id,.playlist .annotations .annotations-text .annotation .annotation-start{font-size:16px;line-height:27px}.playlist .annotations .annotations-text .annotation .annotation-lines{flex-grow:10}.playlist .annotations .annotations-text .annotation .annotation-actions{flex-basis:auto;width:85px;text-align:right;font-size:16px}.playlist .annotations .annotations-text .annotation .annotation-actions i{margin-right:.6rem}.playlist .annotations .annotations-text .annotation .annotation-actions i:last-of-type{margin-right:0}.playlist .annotations .annotations-text .annotation .annotation-actions i:hover{color:var(--wp-annotation-icon-hover-color);cursor:pointer}.playlist .annotations .current{background-color:var(--wp-annotation-current-background-color)}a{cursor:pointer;text-decoration:underline}a,a:link{color:#1d70b8}a:visited{color:#4c2c92}a:hover{color:#003078}a:active,a:focus{color:#0b0c0c}.breadcrumb{background-color:#f4f4f4}.playlist .vocals{background-color:#c0dce0}.track-drop{border:2px dashed blue;height:100px;width:200px;margin:1em 0}.track-drop:before{content:"Drop audio file(s) here!"}.track-drop.drag-enter{border:2px solid orange}footer{margin-top:2em}',""]),e["default"]=a},47010:function(t,e,r){r(57658),r(21703),r(48675),r(33105),r(63408),r(14590),r(3462),r(33824),function(e,r){t.exports=r()}(0,(function(){return(()=>{var t={6824:t=>{
/*!
           * Cross-Browser Split 1.1.1
           * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
           * Available under the MIT License
           * ECMAScript compliant, uniform cross-browser split method
           */
t.exports=function(t){var e,r=String.prototype.split,n=/()??/.exec("")[1]===t;return e=function(e,s,i){if("[object RegExp]"!==Object.prototype.toString.call(s))return r.call(e,s,i);var o,a,l,c,u=[],h=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.extended?"x":"")+(s.sticky?"y":""),d=0;s=new RegExp(s.source,h+"g");e+="",n||(o=new RegExp("^"+s.source+"$(?!\\s)",h)),i=i===t?-1>>>0:i>>>0;while(a=s.exec(e)){if(l=a.index+a[0].length,l>d&&(u.push(e.slice(d,a.index)),!n&&a.length>1&&a[0].replace(o,(function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(a[e]=t)})),a.length>1&&a.index<e.length&&Array.prototype.push.apply(u,a.slice(1)),c=a[0].length,d=l,u.length>=i))break;s.lastIndex===a.index&&s.lastIndex++}return d===e.length?!c&&s.test("")||u.push(""):u.push(e.slice(d)),u.length>i?u.slice(0,i):u},e}()},1804:(t,e,r)=>{"use strict";var n=r(5618),s=r(7205),i=r(7191),o=r(5516),a=r(9981),l=t.exports=function(t,e){var r,s,l,c,u;return arguments.length<2||"string"!==typeof t?(c=e,e=t,t=null):c=arguments[2],n(t)?(r=a.call(t,"c"),s=a.call(t,"e"),l=a.call(t,"w")):(r=l=!0,s=!1),u={value:e,configurable:r,enumerable:s,writable:l},c?i(o(c),u):u};l.gs=function(t,e,r){var l,c,u,h;return"string"!==typeof t?(u=r,r=e,e=t,t=null):u=arguments[3],n(e)?s(e)?n(r)?s(r)||(u=r,r=void 0):r=void 0:(u=e,e=r=void 0):e=void 0,n(t)?(l=a.call(t,"c"),c=a.call(t,"e")):(l=!0,c=!1),h={get:e,set:r,configurable:l,enumerable:c},u?i(o(u),h):h}},430:t=>{"use strict";t.exports=function(){}},7191:(t,e,r)=>{"use strict";t.exports=r(6560)()?Object.assign:r(7346)},6560:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"===typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},7346:(t,e,r)=>{"use strict";var n=r(5103),s=r(2745),i=Math.max;t.exports=function(t,e){var r,o,a,l=i(arguments.length,2);for(t=Object(s(t)),a=function(n){try{t[n]=e[n]}catch(s){r||(r=s)}},o=1;o<l;++o)e=arguments[o],n(e).forEach(a);if(void 0!==r)throw r;return t}},6914:(t,e,r)=>{"use strict";var n=r(430)();t.exports=function(t){return t!==n&&null!==t}},5103:(t,e,r)=>{"use strict";t.exports=r(7446)()?Object.keys:r(6137)},7446:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},6137:(t,e,r)=>{"use strict";var n=r(6914),s=Object.keys;t.exports=function(t){return s(n(t)?Object(t):t)}},5516:(t,e,r)=>{"use strict";var n=r(6914),s=Array.prototype.forEach,i=Object.create,o=function(t,e){var r;for(r in t)e[r]=t[r]};t.exports=function(t){var e=i(null);return s.call(arguments,(function(t){n(t)&&o(Object(t),e)})),e}},1290:t=>{"use strict";t.exports=function(t){if("function"!==typeof t)throw new TypeError(t+" is not a function");return t}},2745:(t,e,r)=>{"use strict";var n=r(6914);t.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},9981:(t,e,r)=>{"use strict";t.exports=r(3591)()?String.prototype.contains:r(6042)},3591:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"===typeof e.contains&&(!0===e.contains("dwa")&&!1===e.contains("foo"))}},6042:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},8832:(t,e,r)=>{"use strict";var n=r(4167),s="7";n("ev-store",s);var i="__EV_STORE_KEY@"+s;function o(t){var e=t[i];return e||(e=t[i]={}),e}t.exports=o},8370:(t,e,r)=>{"use strict";var n,s,i,o,a,l,c,u=r(1804),h=r(1290),d=Function.prototype.apply,p=Function.prototype.call,f=Object.create,m=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var r;return h(e),g.call(this,"__ee__")?r=this.__ee__:(r=b.value=f(null),m(this,"__ee__",b),b.value=null),r[t]?"object"===typeof r[t]?r[t].push(e):r[t]=[r[t],e]:r[t]=e,this},s=function(t,e){var r,s;return h(e),s=this,n.call(this,t,r=function(){i.call(s,t,r),d.call(e,this,arguments)}),r.__eeOnceListener__=e,this},i=function(t,e){var r,n,s,i;if(h(e),!g.call(this,"__ee__"))return this;if(r=this.__ee__,!r[t])return this;if(n=r[t],"object"===typeof n)for(i=0;s=n[i];++i)s!==e&&s.__eeOnceListener__!==e||(2===n.length?r[t]=n[i?0:1]:n.splice(i,1));else n!==e&&n.__eeOnceListener__!==e||delete r[t];return this},o=function(t){var e,r,n,s,i;if(g.call(this,"__ee__")&&(s=this.__ee__[t],s))if("object"===typeof s){for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];for(s=s.slice(),e=0;n=s[e];++e)d.call(n,this,i)}else switch(arguments.length){case 1:p.call(s,this);break;case 2:p.call(s,this,arguments[1]);break;case 3:p.call(s,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),e=1;e<r;++e)i[e-1]=arguments[e];d.call(s,this,i)}},a={on:n,once:s,off:i,emit:o},l={on:u(n),once:u(s),off:u(i),emit:u(o)},c=v({},l),t.exports=e=function(t){return null==t?f(c):v(Object(t),l)},e.methods=a},6226:(t,e)=>{"use strict";function r(t,e){var r,n,s=new Float32Array(t),i=t-1;for(r=0;r<t;r++)n=r/i,s[r]=e>0?n:1-n;return s}function n(t,e){var r,n,s,i=new Float32Array(t),o=t-1;for(r=0;r<t;r++)n=r/o,s=e>0?r:t-1-r,i[s]=Math.exp(2*n-1)/Math.exp(1);return i}function s(t,e){var r,n=new Float32Array(t),s=e>0?Math.PI/2:-Math.PI/2;for(r=0;r<t;++r)n[r]=Math.sin(Math.PI*r/t-s)/2+.5;return n}function i(t,e,r){var n,s,i=new Float32Array(t),o=0;for(s=0;s<t;s++)n=r>0?s:t-1-s,o=s/t,i[n]=Math.log(1+e*o)/Math.log(1+e);return i}Object.defineProperty(e,"__esModule",{value:!0}),e.linear=r,e.exponential=n,e.sCurve=s,e.logarithmic=i},1114:(t,e,r)=>{"use strict";e.h7=e.Y1=e.Hp=e.Jl=e.t$=e._h=void 0,e.L7=v,e.Mt=g;var n=r(6226),s=e._h="sCurve",i=e.t$="linear",o=e.Jl="exponential",a=e.Hp="logarithmic";e.Y1="FadeIn",e.h7="FadeOut";function l(t,e){var r=(0,n.sCurve)(1e4,1);this.setValueCurveAtTime(r,t,e)}function c(t,e){var r=(0,n.sCurve)(1e4,-1);this.setValueCurveAtTime(r,t,e)}function u(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}function h(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}function d(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}function p(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}function f(t,e){var r=(0,n.logarithmic)(1e4,10,1);this.setValueCurveAtTime(r,t,e)}function m(t,e){var r=(0,n.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(r,t,e)}function v(t,e,r,n){switch(e){case s:l.call(t,r,n);break;case i:u.call(t,r,n);break;case o:d.call(t,r,n);break;case a:f.call(t,r,n);break;default:throw new Error("Unsupported Fade type")}}function g(t,e,r,n){switch(e){case s:c.call(t,r,n);break;case i:h.call(t,r,n);break;case o:p.call(t,r,n);break;case a:m.call(t,r,n);break;default:throw new Error("Unsupported Fade type")}}},9144:(t,e,r)=>{var n,s="undefined"!==typeof r.g?r.g:"undefined"!==typeof window?window:{},i=r(5893);"undefined"!==typeof document?n=document:(n=s["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=s["__GLOBAL_DOCUMENT_CACHE@4"]=i)),t.exports=n},8070:(t,e,r)=>{"use strict";var n="undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{};function s(t,e){return t in n?n[t]:(n[t]=e,e)}t.exports=s},4167:(t,e,r)=>{"use strict";var n=r(8070);function s(t,e,r){var s="__INDIVIDUAL_ONE_VERSION_"+t,i=s+"_ENFORCE_SINGLETON",o=n(i,e);if(o!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+o+" installed.\nThis means you cannot install version "+e);return n(s,r)}t.exports=s},849:(t,e,r)=>{var n=!!(r.g===r.g.window&&r.g.URL&&r.g.Blob&&r.g.Worker);function s(t,e){var s,i=this;if(e=e||{},n)return s=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new r.g.Worker(r.g.URL.createObjectURL(new r.g.Blob([s],{type:"text/javascript"})));function o(t){setTimeout((function(){i.onmessage({data:t})}),0)}this.self=e,this.self.postMessage=o,setTimeout(t.bind(e,e),0)}s.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},t.exports=s},6240:t=>{"use strict";t.exports=function(t){return"object"===typeof t&&null!==t}},1730:t=>{var e=9007199254740991,r="[object Arguments]",n="[object Function]",s="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;function o(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function a(t,e){var r=-1,n=Array(t);while(++r<t)n[r]=e(r);return n}function l(t,e){return function(r){return t(e(r))}}var c=Object.prototype,u=c.hasOwnProperty,h=c.toString,d=c.propertyIsEnumerable,p=l(Object.keys,Object),f=Math.max,m=!d.call({valueOf:1},"valueOf");function v(t,e){var r=E(t)||T(t)?a(t.length,String):[],n=r.length,s=!!n;for(var i in t)!e&&!u.call(t,i)||s&&("length"==i||x(i,n))||r.push(i);return r}function g(t,e,r){var n=t[e];u.call(t,e)&&S(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function b(t){if(!P(t))return p(t);var e=[];for(var r in Object(t))u.call(t,r)&&"constructor"!=r&&e.push(r);return e}function y(t,e){return e=f(void 0===e?t.length-1:e,0),function(){var r=arguments,n=-1,s=f(r.length-e,0),i=Array(s);while(++n<s)i[n]=r[e+n];n=-1;var a=Array(e+1);while(++n<e)a[n]=r[n];return a[e]=i,o(t,this,a)}}function w(t,e,r,n){r||(r={});var s=-1,i=e.length;while(++s<i){var o=e[s],a=n?n(r[o],t[o],o,r,t):void 0;g(r,o,void 0===a?t[o]:a)}return r}function k(t){return y((function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;i=t.length>3&&"function"==typeof i?(s--,i):void 0,o&&_(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);while(++n<s){var a=r[n];a&&t(e,a,n,i)}return e}))}function x(t,r){return r=null==r?e:r,!!r&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<r}function _(t,e,r){if(!A(r))return!1;var n=typeof e;return!!("number"==n?O(r)&&x(e,r.length):"string"==n&&e in r)&&S(r[e],t)}function P(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||c;return t===r}function S(t,e){return t===e||t!==t&&e!==e}function T(t){return R(t)&&u.call(t,"callee")&&(!d.call(t,"callee")||h.call(t)==r)}var E=Array.isArray;function O(t){return null!=t&&C(t.length)&&!j(t)}function R(t){return z(t)&&O(t)}function j(t){var e=A(t)?h.call(t):"";return e==n||e==s}function C(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function A(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function z(t){return!!t&&"object"==typeof t}var M=k((function(t,e){if(m||P(e)||O(e))w(e,$(e),t);else for(var r in e)u.call(e,r)&&g(t,r,e[r])}));function $(t){return O(t)?v(t):b(t)}t.exports=M},2098:(t,e,r)=>{t=r.nmd(t);var n=200,s="__lodash_hash_undefined__",i=800,o=16,a=9007199254740991,l="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",h="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",m="[object GeneratorFunction]",v="[object Map]",g="[object Number]",b="[object Null]",y="[object Object]",w="[object Proxy]",k="[object RegExp]",x="[object Set]",_="[object String]",P="[object Undefined]",S="[object WeakMap]",T="[object ArrayBuffer]",E="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",j="[object Int8Array]",C="[object Int16Array]",A="[object Int32Array]",z="[object Uint8Array]",M="[object Uint8ClampedArray]",$="[object Uint16Array]",G="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,D={};D[O]=D[R]=D[j]=D[C]=D[A]=D[z]=D[M]=D[$]=D[G]=!0,D[l]=D[c]=D[T]=D[h]=D[E]=D[d]=D[p]=D[f]=D[v]=D[g]=D[y]=D[k]=D[x]=D[_]=D[S]=!1;var N="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,V="object"==typeof self&&self&&self.Object===Object&&self,U=N||V||Function("return this")(),W=e&&!e.nodeType&&e,q=W&&t&&!t.nodeType&&t,B=q&&q.exports===W,H=B&&N.process,X=function(){try{var t=q&&q.require&&q.require("util").types;return t||H&&H.binding&&H.binding("util")}catch(e){}}(),Z=X&&X.isTypedArray;function Y(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function J(t,e){var r=-1,n=Array(t);while(++r<t)n[r]=e(r);return n}function K(t){return function(e){return t(e)}}function Q(t,e){return null==t?void 0:t[e]}function tt(t,e){return function(r){return t(e(r))}}var et=Array.prototype,rt=Function.prototype,nt=Object.prototype,st=U["__core-js_shared__"],it=rt.toString,ot=nt.hasOwnProperty,at=function(){var t=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lt=nt.toString,ct=it.call(Object),ut=RegExp("^"+it.call(ot).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=B?U.Buffer:void 0,dt=U.Symbol,pt=U.Uint8Array,ft=ht?ht.allocUnsafe:void 0,mt=tt(Object.getPrototypeOf,Object),vt=Object.create,gt=nt.propertyIsEnumerable,bt=et.splice,yt=dt?dt.toStringTag:void 0,wt=function(){try{var t=ke(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),kt=ht?ht.isBuffer:void 0,xt=Math.max,_t=Date.now,Pt=ke(U,"Map"),St=ke(Object,"create"),Tt=function(){function t(){}return function(e){if(!We(e))return{};if(vt)return vt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Et(t){var e=-1,r=null==t?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Ot(){this.__data__=St?St(null):{},this.size=0}function Rt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function jt(t){var e=this.__data__;if(St){var r=e[t];return r===s?void 0:r}return ot.call(e,t)?e[t]:void 0}function Ct(t){var e=this.__data__;return St?void 0!==e[t]:ot.call(e,t)}function At(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=St&&void 0===e?s:e,this}function zt(t){var e=-1,r=null==t?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Mt(){this.__data__=[],this.size=0}function $t(t){var e=this.__data__,r=te(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():bt.call(e,r,1),--this.size,!0}function Gt(t){var e=this.__data__,r=te(e,t);return r<0?void 0:e[r][1]}function Lt(t){return te(this.__data__,t)>-1}function Ft(t,e){var r=this.__data__,n=te(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function It(t){var e=-1,r=null==t?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Dt(){this.size=0,this.__data__={hash:new Et,map:new(Pt||zt),string:new Et}}function Nt(t){var e=we(this,t)["delete"](t);return this.size-=e?1:0,e}function Vt(t){return we(this,t).get(t)}function Ut(t){return we(this,t).has(t)}function Wt(t,e){var r=we(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function qt(t){var e=this.__data__=new zt(t);this.size=e.size}function Bt(){this.__data__=new zt,this.size=0}function Ht(t){var e=this.__data__,r=e["delete"](t);return this.size=e.size,r}function Xt(t){return this.__data__.get(t)}function Zt(t){return this.__data__.has(t)}function Yt(t,e){var r=this.__data__;if(r instanceof zt){var s=r.__data__;if(!Pt||s.length<n-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new It(s)}return r.set(t,e),this.size=r.size,this}function Jt(t,e){var r=Fe(t),n=!r&&Le(t),s=!r&&!n&&Ne(t),i=!r&&!n&&!s&&He(t),o=r||n||s||i,a=o?J(t.length,String):[],l=a.length;for(var c in t)!e&&!ot.call(t,c)||o&&("length"==c||s&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pe(c,l))||a.push(c);return a}function Kt(t,e,r){(void 0!==r&&!Ge(t[e],r)||void 0===r&&!(e in t))&&ee(t,e,r)}function Qt(t,e,r){var n=t[e];ot.call(t,e)&&Ge(n,r)&&(void 0!==r||e in t)||ee(t,e,r)}function te(t,e){var r=t.length;while(r--)if(Ge(t[r][0],e))return r;return-1}function ee(t,e,r){"__proto__"==e&&wt?wt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}Et.prototype.clear=Ot,Et.prototype["delete"]=Rt,Et.prototype.get=jt,Et.prototype.has=Ct,Et.prototype.set=At,zt.prototype.clear=Mt,zt.prototype["delete"]=$t,zt.prototype.get=Gt,zt.prototype.has=Lt,zt.prototype.set=Ft,It.prototype.clear=Dt,It.prototype["delete"]=Nt,It.prototype.get=Vt,It.prototype.has=Ut,It.prototype.set=Wt,qt.prototype.clear=Bt,qt.prototype["delete"]=Ht,qt.prototype.get=Xt,qt.prototype.has=Zt,qt.prototype.set=Yt;var re=be();function ne(t){return null==t?void 0===t?P:b:yt&&yt in Object(t)?xe(t):je(t)}function se(t){return qe(t)&&ne(t)==l}function ie(t){if(!We(t)||Ee(t))return!1;var e=Ve(t)?ut:F;return e.test($e(t))}function oe(t){return qe(t)&&Ue(t.length)&&!!D[ne(t)]}function ae(t){if(!We(t))return Re(t);var e=Oe(t),r=[];for(var n in t)("constructor"!=n||!e&&ot.call(t,n))&&r.push(n);return r}function le(t,e,r,n,s){t!==e&&re(e,(function(i,o){if(s||(s=new qt),We(i))ce(t,e,o,r,le,n,s);else{var a=n?n(Ae(t,o),i,o+"",t,e,s):void 0;void 0===a&&(a=i),Kt(t,o,a)}}),Ye)}function ce(t,e,r,n,s,i,o){var a=Ae(t,r),l=Ae(e,r),c=o.get(l);if(c)Kt(t,r,c);else{var u=i?i(a,l,r+"",t,e,o):void 0,h=void 0===u;if(h){var d=Fe(l),p=!d&&Ne(l),f=!d&&!p&&He(l);u=l,d||p||f?Fe(a)?u=a:De(a)?u=me(a):p?(h=!1,u=de(l,!0)):f?(h=!1,u=fe(l,!0)):u=[]:Be(l)||Le(l)?(u=a,Le(a)?u=Xe(a):We(a)&&!Ve(a)||(u=_e(l))):h=!1}h&&(o.set(l,u),s(u,l,n,i,o),o["delete"](l)),Kt(t,r,u)}}function ue(t,e){return ze(Ce(t,e,Qe),t+"")}var he=wt?function(t,e){return wt(t,"toString",{configurable:!0,enumerable:!1,value:Ke(e),writable:!0})}:Qe;function de(t,e){if(e)return t.slice();var r=t.length,n=ft?ft(r):new t.constructor(r);return t.copy(n),n}function pe(t){var e=new t.constructor(t.byteLength);return new pt(e).set(new pt(t)),e}function fe(t,e){var r=e?pe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function me(t,e){var r=-1,n=t.length;e||(e=Array(n));while(++r<n)e[r]=t[r];return e}function ve(t,e,r,n){var s=!r;r||(r={});var i=-1,o=e.length;while(++i<o){var a=e[i],l=n?n(r[a],t[a],a,r,t):void 0;void 0===l&&(l=t[a]),s?ee(r,a,l):Qt(r,a,l)}return r}function ge(t){return ue((function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;i=t.length>3&&"function"==typeof i?(s--,i):void 0,o&&Se(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);while(++n<s){var a=r[n];a&&t(e,a,n,i)}return e}))}function be(t){return function(e,r,n){var s=-1,i=Object(e),o=n(e),a=o.length;while(a--){var l=o[t?a:++s];if(!1===r(i[l],l,i))break}return e}}function ye(t,e,r,n,s,i){return We(t)&&We(e)&&(i.set(e,t),le(t,e,void 0,ye,i),i["delete"](e)),t}function we(t,e){var r=t.__data__;return Te(e)?r["string"==typeof e?"string":"hash"]:r.map}function ke(t,e){var r=Q(t,e);return ie(r)?r:void 0}function xe(t){var e=ot.call(t,yt),r=t[yt];try{t[yt]=void 0;var n=!0}catch(i){}var s=lt.call(t);return n&&(e?t[yt]=r:delete t[yt]),s}function _e(t){return"function"!=typeof t.constructor||Oe(t)?{}:Tt(mt(t))}function Pe(t,e){var r=typeof t;return e=null==e?a:e,!!e&&("number"==r||"symbol"!=r&&I.test(t))&&t>-1&&t%1==0&&t<e}function Se(t,e,r){if(!We(r))return!1;var n=typeof e;return!!("number"==n?Ie(r)&&Pe(e,r.length):"string"==n&&e in r)&&Ge(r[e],t)}function Te(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Ee(t){return!!at&&at in t}function Oe(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||nt;return t===r}function Re(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function je(t){return lt.call(t)}function Ce(t,e,r){return e=xt(void 0===e?t.length-1:e,0),function(){var n=arguments,s=-1,i=xt(n.length-e,0),o=Array(i);while(++s<i)o[s]=n[e+s];s=-1;var a=Array(e+1);while(++s<e)a[s]=n[s];return a[e]=r(o),Y(t,this,a)}}function Ae(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var ze=Me(he);function Me(t){var e=0,r=0;return function(){var n=_t(),s=o-(n-r);if(r=n,s>0){if(++e>=i)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function $e(t){if(null!=t){try{return it.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ge(t,e){return t===e||t!==t&&e!==e}var Le=se(function(){return arguments}())?se:function(t){return qe(t)&&ot.call(t,"callee")&&!gt.call(t,"callee")},Fe=Array.isArray;function Ie(t){return null!=t&&Ue(t.length)&&!Ve(t)}function De(t){return qe(t)&&Ie(t)}var Ne=kt||tr;function Ve(t){if(!We(t))return!1;var e=ne(t);return e==f||e==m||e==u||e==w}function Ue(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function We(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qe(t){return null!=t&&"object"==typeof t}function Be(t){if(!qe(t)||ne(t)!=y)return!1;var e=mt(t);if(null===e)return!0;var r=ot.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&it.call(r)==ct}var He=Z?K(Z):oe;function Xe(t){return ve(t,Ye(t))}var Ze=ue((function(t){return t.push(void 0,ye),Y(Je,void 0,t)}));function Ye(t){return Ie(t)?Jt(t,!0):ae(t)}var Je=ge((function(t,e,r,n){le(t,e,r,n)}));function Ke(t){return function(){return t}}function Qe(t){return t}function tr(){return!1}t.exports=Ze},3520:t=>{var e=9007199254740991,r="[object Arguments]",n="[object Function]",s="[object GeneratorFunction]",i=/^(?:0|[1-9]\d*)$/;function o(t,e){var r=-1,n=Array(t);while(++r<t)n[r]=e(r);return n}function a(t,e){return function(r){return t(e(r))}}var l=Object.prototype,c=l.hasOwnProperty,u=l.toString,h=l.propertyIsEnumerable,d=a(Object.keys,Object);function p(t,e){var r=k(t)||w(t)?o(t.length,String):[],n=r.length,s=!!n;for(var i in t)!e&&!c.call(t,i)||s&&("length"==i||b(i,n))||r.push(i);return r}var f=g();function m(t,e){return t&&f(t,e,R)}function v(t){if(!y(t))return d(t);var e=[];for(var r in Object(t))c.call(t,r)&&"constructor"!=r&&e.push(r);return e}function g(t){return function(e,r,n){var s=-1,i=Object(e),o=n(e),a=o.length;while(a--){var l=o[t?a:++s];if(!1===r(i[l],l,i))break}return e}}function b(t,r){return r=null==r?e:r,!!r&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<r}function y(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||l;return t===r}function w(t){return _(t)&&c.call(t,"callee")&&(!h.call(t,"callee")||u.call(t)==r)}var k=Array.isArray;function x(t){return null!=t&&S(t.length)&&!P(t)}function _(t){return E(t)&&x(t)}function P(t){var e=T(t)?u.call(t):"";return e==n||e==s}function S(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function E(t){return!!t&&"object"==typeof t}function O(t,e){return t&&m(t,"function"==typeof e?e:j)}function R(t){return x(t)?p(t):v(t)}function j(t){return t}t.exports=O},372:(t,e,r)=>{"use strict";var n=r(6060);t.exports=function(t){if("function"!==typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!==typeof t.length)return!1;if("function"!==typeof t.call)return!1;if("function"!==typeof t.apply)return!1}catch(e){return!1}return!n(t)}},3940:(t,e,r)=>{"use strict";var n=r(5618),s={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!n(t)&&hasOwnProperty.call(s,typeof t)}},7205:(t,e,r)=>{"use strict";var n=r(372),s=/^\s*class[\s{/}]/,i=Function.prototype.toString;t.exports=function(t){return!!n(t)&&!s.test(i.call(t))}},6060:(t,e,r)=>{"use strict";var n=r(3940);t.exports=function(t){if(!n(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(e){return!1}}},5618:t=>{"use strict";var e=void 0;t.exports=function(t){return t!==e&&null!==t}},4935:(t,e,r)=>{var n=r(3513);t.exports=n},7921:(t,e,r)=>{var n=r(3072);t.exports=n},347:(t,e,r)=>{var n=r(8744);t.exports=n},9720:(t,e,r)=>{var n=r(6943);t.exports=n},6672:(t,e,r)=>{var n=r(6240),s=r(7265);function i(t,e,r){for(var i in e){var l=e[i];void 0===l?o(t,i,l,r):s(l)?(o(t,i,l,r),l.hook&&l.hook(t,i,r?r[i]:void 0)):n(l)?a(t,e,r,i,l):t[i]=l}}function o(t,e,r,n){if(n){var i=n[e];if(s(i))i.unhook&&i.unhook(t,e,r);else if("attributes"===e)for(var o in i)t.removeAttribute(o);else if("style"===e)for(var a in i)t.style[a]="";else t[e]="string"===typeof i?"":null}}function a(t,e,r,s,i){var o=r?r[s]:void 0;if("attributes"!==s)if(o&&n(o)&&l(o)!==l(i))t[s]=i;else{n(t[s])||(t[s]={});var a="style"===s?"":void 0;for(var c in i){var u=i[c];t[s][c]=void 0===u?a:u}}else for(var h in i){var d=i[h];void 0===d?t.removeAttribute(h):t.setAttribute(h,d)}}function l(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=i},3513:(t,e,r)=>{var n=r(9144),s=r(6672),i=r(5170),o=r(6221),a=r(4097),l=r(6078);function c(t,e){var r=e&&e.document||n,u=e?e.warn:null;if(t=l(t).a,a(t))return t.init();if(o(t))return r.createTextNode(t.text);if(!i(t))return u&&u("Item is not a valid virtual dom node",t),null;var h=null===t.namespace?r.createElement(t.tagName):r.createElementNS(t.namespace,t.tagName),d=t.properties;s(h,d);for(var p=t.children,f=0;f<p.length;f++){var m=c(p[f],e);m&&h.appendChild(m)}return h}t.exports=c},8992:t=>{var e={};function r(t,e,r,s){return r&&0!==r.length?(r.sort(i),n(t,e,r,s,0)):{}}function n(t,r,i,o,a){if(o=o||{},t){s(i,a,a)&&(o[a]=t);var l=r.children;if(l)for(var c=t.childNodes,u=0;u<r.children.length;u++){a+=1;var h=l[u]||e,d=a+(h.count||0);s(i,a,d)&&n(c[u],h,i,o,a),a=d}}return o}function s(t,e,r){if(0===t.length)return!1;var n,s,i=0,o=t.length-1;while(i<=o){if(n=(o+i)/2>>0,s=t[n],i===o)return s>=e&&s<=r;if(s<e)i=n+1;else{if(!(s>r))return!0;o=n-1}}return!1}function i(t,e){return t>e?1:-1}t.exports=r},9120:(t,e,r)=>{var n=r(6672),s=r(4097),i=r(8057),o=r(6670);function a(t,e,r){var s=t.type,o=t.vNode,a=t.patch;switch(s){case i.REMOVE:return l(e,o);case i.INSERT:return c(e,a,r);case i.VTEXT:return u(e,o,a,r);case i.WIDGET:return h(e,o,a,r);case i.VNODE:return d(e,o,a,r);case i.ORDER:return f(e,a),e;case i.PROPS:return n(e,a,o.properties),e;case i.THUNK:return m(e,r.patch(e,a,r));default:return e}}function l(t,e){var r=t.parentNode;return r&&r.removeChild(t),p(t,e),null}function c(t,e,r){var n=r.render(e,r);return t&&t.appendChild(n),t}function u(t,e,r,n){var s;if(3===t.nodeType)t.replaceData(0,t.length,r.text),s=t;else{var i=t.parentNode;s=n.render(r,n),i&&s!==t&&i.replaceChild(s,t)}return s}function h(t,e,r,n){var s,i=o(e,r);s=i?r.update(e,t)||t:n.render(r,n);var a=t.parentNode;return a&&s!==t&&a.replaceChild(s,t),i||p(t,e),s}function d(t,e,r,n){var s=t.parentNode,i=n.render(r,n);return s&&i!==t&&s.replaceChild(i,t),i}function p(t,e){"function"===typeof e.destroy&&s(e)&&e.destroy(t)}function f(t,e){for(var r,n,s,i=t.childNodes,o={},a=0;a<e.removes.length;a++)n=e.removes[a],r=i[n.from],n.key&&(o[n.key]=r),t.removeChild(r);for(var l=i.length,c=0;c<e.inserts.length;c++)s=e.inserts[c],r=o[s.key],t.insertBefore(r,s.to>=l++?null:i[s.to])}function m(t,e){return t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t),e}t.exports=a},6943:(t,e,r)=>{var n=r(9144),s=r(7362),i=r(3513),o=r(8992),a=r(9120);function l(t,e,r){return r=r||{},r.patch=r.patch&&r.patch!==l?r.patch:c,r.render=r.render||i,r.patch(t,e,r)}function c(t,e,r){var s=h(e);if(0===s.length)return t;var i=o(t,e.a,s),a=t.ownerDocument;r.document||a===n||(r.document=a);for(var l=0;l<s.length;l++){var c=s[l];t=u(t,i[c],e[c],r)}return t}function u(t,e,r,n){if(!e)return t;var i;if(s(r))for(var o=0;o<r.length;o++)i=a(r[o],e,n),e===t&&(t=i);else i=a(r,e,n),e===t&&(t=i);return t}function h(t){var e=[];for(var r in t)"a"!==r&&e.push(Number(r));return e}t.exports=l},6670:(t,e,r)=>{var n=r(4097);function s(t,e){return!(!n(t)||!n(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}t.exports=s},6505:(t,e,r)=>{"use strict";var n=r(8832);function s(t){if(!(this instanceof s))return new s(t);this.value=t}t.exports=s,s.prototype.hook=function(t,e){var r=n(t),s=e.substr(3);r[s]=this.value},s.prototype.unhook=function(t,e){var r=n(t),s=e.substr(3);r[s]=void 0}},7199:t=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this.value=t}t.exports=e,e.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},8744:(t,e,r)=>{"use strict";var n=r(7362),s=r(4282),i=r(4268),o=r(5170),a=r(6221),l=r(4097),c=r(7265),u=r(6741),h=r(1948),d=r(7199),p=r(6505);function f(t,e,r){var n,i,o,a,l=[];return!r&&b(e)&&(r=e,i={}),i=i||e||{},n=h(t,i),i.hasOwnProperty("key")&&(o=i.key,i.key=void 0),i.hasOwnProperty("namespace")&&(a=i.namespace,i.namespace=void 0),"INPUT"!==n||a||!i.hasOwnProperty("value")||void 0===i.value||c(i.value)||(i.value=d(i.value)),v(i),void 0!==r&&null!==r&&m(r,l,n,i),new s(n,i,l,o,a)}function m(t,e,r,s){if("string"===typeof t)e.push(new i(t));else if("number"===typeof t)e.push(new i(String(t)));else if(g(t))e.push(t);else{if(!n(t)){if(null===t||void 0===t)return;throw y({foreignObject:t,parentVnode:{tagName:r,properties:s}})}for(var o=0;o<t.length;o++)m(t[o],e,r,s)}}function v(t){for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];if(c(r))continue;"ev-"===e.substr(0,3)&&(t[e]=p(r))}}function g(t){return o(t)||a(t)||l(t)||u(t)}function b(t){return"string"===typeof t||n(t)||g(t)}function y(t){var e=new Error;return e.type="virtual-hyperscript.unexpected.virtual-element",e.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+w(t.foreignObject)+".\nThe parent vnode is:\n"+w(t.parentVnode),e.foreignObject=t.foreignObject,e.parentVnode=t.parentVnode,e}function w(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}t.exports=f},1948:(t,e,r)=>{"use strict";var n=r(6824),s=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,i=/^\.|#/;function o(t,e){if(!t)return"DIV";var r,o,a,l,c=!e.hasOwnProperty("id"),u=n(t,s),h=null;for(i.test(u[1])&&(h="DIV"),l=0;l<u.length;l++)o=u[l],o&&(a=o.charAt(0),h?"."===a?(r=r||[],r.push(o.substring(1,o.length))):"#"===a&&c&&(e.id=o.substring(1,o.length)):h=o);return r&&(e.className&&r.push(e.className),e.className=r.join(" ")),e.namespace?h:h.toUpperCase()}t.exports=o},6078:(t,e,r)=>{var n=r(5170),s=r(6221),i=r(4097),o=r(6741);function a(t,e){var r=t,n=e;return o(e)&&(n=l(e,t)),o(t)&&(r=l(t,null)),{a:r,b:n}}function l(t,e){var r=t.vnode;if(r||(r=t.vnode=t.render(e)),!(n(r)||s(r)||i(r)))throw new Error("thunk did not return a valid node");return r}t.exports=a},6741:t=>{function e(t){return t&&"Thunk"===t.type}t.exports=e},7265:t=>{function e(t){return t&&("function"===typeof t.hook&&!t.hasOwnProperty("hook")||"function"===typeof t.unhook&&!t.hasOwnProperty("unhook"))}t.exports=e},5170:(t,e,r)=>{var n=r(9962);function s(t){return t&&"VirtualNode"===t.type&&t.version===n}t.exports=s},6221:(t,e,r)=>{var n=r(9962);function s(t){return t&&"VirtualText"===t.type&&t.version===n}t.exports=s},4097:t=>{function e(t){return t&&"Widget"===t.type}t.exports=e},9962:t=>{t.exports="2"},4282:(t,e,r)=>{var n=r(9962),s=r(5170),i=r(4097),o=r(6741),a=r(7265);t.exports=u;var l={},c=[];function u(t,e,r,n,u){this.tagName=t,this.properties=e||l,this.children=r||c,this.key=null!=n?String(n):void 0,this.namespace="string"===typeof u?u:null;var h,d=r&&r.length||0,p=0,f=!1,m=!1,v=!1;for(var g in e)if(e.hasOwnProperty(g)){var b=e[g];a(b)&&b.unhook&&(h||(h={}),h[g]=b)}for(var y=0;y<d;y++){var w=r[y];s(w)?(p+=w.count||0,!f&&w.hasWidgets&&(f=!0),!m&&w.hasThunks&&(m=!0),v||!w.hooks&&!w.descendantHooks||(v=!0)):!f&&i(w)?"function"===typeof w.destroy&&(f=!0):!m&&o(w)&&(m=!0)}this.count=d+p,this.hasWidgets=f,this.hasThunks=m,this.hooks=h,this.descendantHooks=v}u.prototype.version=n,u.prototype.type="VirtualNode"},8057:(t,e,r)=>{var n=r(9962);function s(t,e,r){this.type=Number(t),this.vNode=e,this.patch=r}s.NONE=0,s.VTEXT=1,s.VNODE=2,s.WIDGET=3,s.PROPS=4,s.ORDER=5,s.INSERT=6,s.REMOVE=7,s.THUNK=8,t.exports=s,s.prototype.version=n,s.prototype.type="VirtualPatch"},4268:(t,e,r)=>{var n=r(9962);function s(t){this.text=String(t)}t.exports=s,s.prototype.version=n,s.prototype.type="VirtualText"},9973:(t,e,r)=>{var n=r(6240),s=r(7265);function i(t,e){var r;for(var a in t){a in e||(r=r||{},r[a]=void 0);var l=t[a],c=e[a];if(l!==c)if(n(l)&&n(c))if(o(c)!==o(l))r=r||{},r[a]=c;else if(s(c))r=r||{},r[a]=c;else{var u=i(l,c);u&&(r=r||{},r[a]=u)}else r=r||{},r[a]=c}for(var h in e)h in t||(r=r||{},r[h]=e[h]);return r}function o(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=i},3072:(t,e,r)=>{var n=r(7362),s=r(8057),i=r(5170),o=r(6221),a=r(4097),l=r(6741),c=r(6078),u=r(9973);function h(t,e){var r={a:t};return d(t,e,r,0),r}function d(t,e,r,n){if(t!==e){var c=r[n],h=!1;if(l(t)||l(e))v(t,e,r,n);else if(null==e)a(t)||(f(t,r,n),c=r[n]),c=_(c,new s(s.REMOVE,t,e));else if(i(e))if(i(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var d=u(t.properties,e.properties);d&&(c=_(c,new s(s.PROPS,t,d))),c=p(t,e,r,c,n)}else c=_(c,new s(s.VNODE,t,e)),h=!0;else c=_(c,new s(s.VNODE,t,e)),h=!0;else o(e)?o(t)?t.text!==e.text&&(c=_(c,new s(s.VTEXT,t,e))):(c=_(c,new s(s.VTEXT,t,e)),h=!0):a(e)&&(a(t)||(h=!0),c=_(c,new s(s.WIDGET,t,e)));c&&(r[n]=c),h&&f(t,r,n)}}function p(t,e,r,n,o){for(var a=t.children,l=w(a,e.children),c=l.children,u=a.length,h=c.length,p=u>h?u:h,f=0;f<p;f++){var m=a[f],v=c[f];o+=1,m?d(m,v,r,o):v&&(n=_(n,new s(s.INSERT,null,v))),i(m)&&m.count&&(o+=m.count)}return l.moves&&(n=_(n,new s(s.ORDER,t,l.moves))),n}function f(t,e,r){b(t,e,r),m(t,e,r)}function m(t,e,r){if(a(t))"function"===typeof t.destroy&&(e[r]=_(e[r],new s(s.REMOVE,t,null)));else if(i(t)&&(t.hasWidgets||t.hasThunks))for(var n=t.children,o=n.length,c=0;c<o;c++){var u=n[c];r+=1,m(u,e,r),i(u)&&u.count&&(r+=u.count)}else l(t)&&v(t,null,e,r)}function v(t,e,r,n){var i=c(t,e),o=h(i.a,i.b);g(o)&&(r[n]=new s(s.THUNK,null,o))}function g(t){for(var e in t)if("a"!==e)return!0;return!1}function b(t,e,r){if(i(t)){if(t.hooks&&(e[r]=_(e[r],new s(s.PROPS,t,y(t.hooks)))),t.descendantHooks||t.hasThunks)for(var n=t.children,o=n.length,a=0;a<o;a++){var c=n[a];r+=1,b(c,e,r),i(c)&&c.count&&(r+=c.count)}}else l(t)&&v(t,null,e,r)}function y(t){var e={};for(var r in t)e[r]=void 0;return e}function w(t,e){var r=x(e),n=r.keys,s=r.free;if(s.length===e.length)return{children:e,moves:null};var i=x(t),o=i.keys,a=i.free;if(a.length===t.length)return{children:e,moves:null};for(var l=[],c=0,u=s.length,h=0,d=0;d<t.length;d++){var p,f=t[d];f.key?n.hasOwnProperty(f.key)?(p=n[f.key],l.push(e[p])):(p=d-h++,l.push(null)):c<u?(p=s[c++],l.push(e[p])):(p=d-h++,l.push(null))}for(var m=c>=s.length?e.length:s[c],v=0;v<e.length;v++){var g=e[v];g.key?o.hasOwnProperty(g.key)||l.push(g):v>=m&&l.push(g)}for(var b,y=l.slice(),w=0,_=[],P=[],S=0;S<e.length;){var T=e[S];b=y[w];while(null===b&&y.length)_.push(k(y,w,null)),b=y[w];b&&b.key===T.key?(w++,S++):T.key?(b&&b.key&&n[b.key]!==S+1?(_.push(k(y,w,b.key)),b=y[w],b&&b.key===T.key?w++:P.push({key:T.key,to:S})):P.push({key:T.key,to:S}),S++):b&&b.key&&_.push(k(y,w,b.key))}while(w<y.length)b=y[w],_.push(k(y,w,b&&b.key));return _.length!==h||P.length?{children:l,moves:{removes:_,inserts:P}}:{children:l,moves:null}}function k(t,e,r){return t.splice(e,1),{from:e,key:r}}function x(t){for(var e={},r=[],n=t.length,s=0;s<n;s++){var i=t[s];i.key?e[i.key]=s:r.push(s)}return{keys:e,free:r}}function _(t,e){return t?(n(t)?t.push(e):t=[t,e],t):e}t.exports=h},4991:t=>{"use strict";function e(t){for(var e,r=1/0,n=-1/0,s=0,i=t.length;s<i;s++)e=t[s],r>e&&(r=e),n<e&&(n=e);return{min:r,max:n}}function r(t,e){var r=Math.pow(2,e-1),n=t<0?t*r:t*(r-1);return Math.max(-r,Math.min(r-1,n))}function n(t,n,i){var o,a,l,c,u,h,d,p=t.length,f=Math.ceil(p/n),m=s(i,2*f);for(o=0;o<f;o++)a=o*n,l=(o+1)*n>p?p:(o+1)*n,c=t.subarray(a,l),d=e(c),h=r(d.min,i),u=r(d.max,i),m[2*o]=h,m[2*o+1]=u;return m}function s(t,e){return new(new Function(`return Int${t}Array`)())(e)}function i(t,e){var r,n,i=t.length,o=1/i,a=t[0].length/2,l=0,c=0,u=s(e,2*a);for(c=0;c<a;c++){for(r=0,n=0,l=0;l<i;l++)r+=o*t[l][2*c],n+=o*t[l][2*c+1];u[2*c]=r,u[2*c+1]=n}return[u]}function o(t,e){return"number"===typeof t?t:e}t.exports=function(t,e,r,s,a,l){if(e=o(e,1e3),l=o(l,16),null!==r&&void 0!==r||(r=!0),[8,16,32].indexOf(l)<0)throw new Error("Invalid number of bits specified for peaks.");var c,u,h,d,p=t.numberOfChannels,f=[];if(s=o(s,0),a=o(a,t.length),"undefined"===typeof t.subarray)for(c=0;c<p;c++)h=t.getChannelData(c),d=h.subarray(s,a),f.push(n(d,e,l));else f.push(n(t.subarray(s,a),e,l));return r&&f.length>1&&(f=i(f,l)),u=f[0].length/2,{length:u,data:f,bits:l}}},7362:t=>{var e=Array.isArray,r=Object.prototype.toString;function n(t){return"[object Array]"===r.call(t)}t.exports=e||n},5893:()=>{}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,r),i.loaded=!0,i.exports}(()=>{r.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return r.d(e,{a:e}),e}})(),(()=>{r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{r.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})();var n={};return(()=>{"use strict";r.r(n),r.d(n,{default:()=>Et,init:()=>Tt});var t=r(2098),e=r.n(t),s=r(4935),i=r.n(s),o=r(8370),a=r.n(o),l=r(347),c=r.n(l),u=r(7921),h=r.n(u),d=r(9720),p=r.n(d),f=r(849),m=r.n(f);function v(t,e){return Math.ceil(t*e)}function g(t,e,r){return t*e/r}function b(t,e,r){return Math.ceil(t*r/e)}function y(t,e){const r=Math.ceil(t.duration*e),n=new OfflineAudioContext(t.numberOfChannels,r,e),s=n.createBufferSource();return s.buffer=t,s.connect(n.destination),s.start(),n.startRendering()}const w=0,k=1,x=2,_=3,P=class{constructor(t,e,r=a()()){this.src=t,this.ac=e,this.audioRequestState=w,this.ee=r}setStateChange(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}fileProgress(t){let e=0;this.audioRequestState===w&&this.setStateChange(k),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}fileLoad(t){const e=t.target.response||t.target.result;return this.setStateChange(x),new Promise(((t,r)=>{this.ac.decodeAudioData(e,(e=>{this.audioBuffer=e,this.setStateChange(_),t(e)}),(t=>{r(null===t?Error("MediaDecodeAudioDataUnknownContentType"):t)}))}))}},S=class extends P{load(){return new Promise(((t,e)=>{if(this.src.type.match(/audio.*/)||this.src.type.match(/video\/ogg/)){const r=new FileReader;r.readAsArrayBuffer(this.src),r.addEventListener("progress",(t=>{super.fileProgress(t)})),r.addEventListener("load",(r=>{const n=super.fileLoad(r);n.then((e=>{t(e)})).catch(e)})),r.addEventListener("error",e)}else e(Error(`Unsupported file type ${this.src.type}`))}))}};class T extends P{load(){return Promise.resolve(this.src)}}const E=class extends P{load(){return new Promise(((t,e)=>{const r=new XMLHttpRequest;r.open("GET",this.src,!0),r.responseType="arraybuffer",r.send(),r.addEventListener("progress",(t=>{super.fileProgress(t)})),r.addEventListener("load",(r=>{const n=super.fileLoad(r);n.then((e=>{t(e)})).catch(e)})),r.addEventListener("error",(()=>{e(Error(`Track ${this.src} failed to load`))}))}))}},O=class{static createLoader(t,e,r){if(t instanceof Blob)return new S(t,e,r);if(t instanceof AudioBuffer)return new T(t,e,r);if("string"===typeof t)return new E(t,e,r);throw new Error("Unsupported src type")}},R=class{constructor(t){this.playlist=t}hook(t){const e=this.playlist;if(!e.isScrolling){const r=t;if(e.isAutomaticScroll){const r=t.getBoundingClientRect(),n=e.controls.show?e.controls.width:0,s=g(r.width-n,e.samplesPerPixel,e.sampleRate),i=e.isPlaying()?e.playbackSeconds:e.getTimeSelection().start;(i<e.scrollLeft||i>=e.scrollLeft+s)&&(e.scrollLeft=Math.min(i,e.duration-s))}const n=b(e.scrollLeft,e.samplesPerPixel,e.sampleRate);r.scrollLeft=n}}},j=class{constructor(t,e,r,n,s){this.tickInfo=t,this.offset=e,this.samplesPerPixel=r,this.duration=n,this.colors=s}hook(t,e,r){if(void 0!==r&&r.offset===this.offset&&r.duration===this.duration&&r.samplesPerPixel===this.samplesPerPixel)return;const n=t.width,s=t.height,i=t.getContext("2d");i.clearRect(0,0,n,s),i.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach((t=>{const e=this.tickInfo[t],r=s-e;i.fillRect(t,r,1,e)}))}};class C{constructor(t,e,r,n,s=0,i){this.duration=t,this.offset=e,this.samplesPerPixel=r,this.sampleRate=n,this.marginLeft=s,this.colors=i,this.timeinfo={2e4:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12e3:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},1e4:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5e3:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}getScaleInfo(t){let e=Object.keys(this.timeinfo).map((t=>parseInt(t,10)));e=e.sort(((t,e)=>t-e));for(let r=0;r<e.length;r+=1)if(t<=e[r])return this.timeinfo[e[r]];return this.timeinfo[e[0]]}static formatTime(t){const e=t/1e3;let r=e%60;const n=(e-r)/60;return r<10&&(r=`0${r}`),`${n}:${r}`}render(){const t=b(this.duration,this.samplesPerPixel,this.sampleRate),e=this.sampleRate/this.samplesPerPixel,r=b(this.offset,this.samplesPerPixel,this.sampleRate),n=this.getScaleInfo(this.samplesPerPixel),s={},i=[],o=t+r;let a=0;for(let l=0;l<o;l+=e*n.secondStep){const t=Math.floor(l),e=t-r;t>=r&&(n.marker&&a%n.marker===0?(i.push(c()("div.time",{attributes:{style:`position: absolute; left: ${e}px;`}},[C.formatTime(a)])),s[e]=10):n.bigStep&&a%n.bigStep===0?s[e]=5:n.smallStep&&a%n.smallStep===0&&(s[e]=2)),a+=1e3*n.secondStep}return c()("div.playlist-time-scale",{attributes:{style:`position: relative; left: 0; right: 0; margin-left: ${this.marginLeft}px;`}},[i,c()("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new j(s,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}const A=C;var z,M=r(1730),$=r.n(M),G=r(3520),L=r.n(G),F=new Uint8Array(16);function I(){if(!z&&(z="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!z))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return z(F)}const D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function N(t){return"string"===typeof t&&D.test(t)}const V=N;for(var U=[],W=0;W<256;++W)U.push((W+256).toString(16).substr(1));function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(U[t[e+0]]+U[t[e+1]]+U[t[e+2]]+U[t[e+3]]+"-"+U[t[e+4]]+U[t[e+5]]+"-"+U[t[e+6]]+U[t[e+7]]+"-"+U[t[e+8]]+U[t[e+9]]+"-"+U[t[e+10]]+U[t[e+11]]+U[t[e+12]]+U[t[e+13]]+U[t[e+14]]+U[t[e+15]]).toLowerCase();if(!V(r))throw TypeError("Stringified UUID is invalid");return r}const B=q;function H(t,e,r){t=t||{};var n=t.random||(t.rng||I)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return B(n)}const X=H;var Z=r(4991),Y=r.n(Z),J=r(1114);const K=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){t.preventDefault();const e=t.offsetX,r=g(e,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",r,r,this.track)}static getClass(){return".state-cursor"}static getEvents(){return["click"]}},Q=class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitSelection(t){const e=Math.min(t,this.startX),r=Math.max(t,this.startX),n=g(e,this.samplesPerPixel,this.sampleRate),s=g(r,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",n,s,this.track)}complete(t){this.emitSelection(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.startX=t.offsetX;const e=g(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}mousemove(t){this.active&&(t.preventDefault(),this.emitSelection(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-select"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},tt=class{constructor(t){this.track=t,this.active=!1}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}emitShift(t){const e=t-this.prevX,r=g(e,this.samplesPerPixel,this.sampleRate);this.prevX=t,this.track.ee.emit("shift",r,this.track)}complete(t){this.emitShift(t),this.active=!1}mousedown(t){t.preventDefault(),this.active=!0,this.el=t.target,this.prevX=t.offsetX}mousemove(t){this.active&&(t.preventDefault(),this.emitShift(t.offsetX))}mouseup(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}mouseleave(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}static getClass(){return".state-shift"}static getEvents(){return["mousedown","mousemove","mouseup","mouseleave"]}},et=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=t.offsetX,r=g(e,this.samplesPerPixel,this.sampleRate);r>this.track.getStartTime()&&r<this.track.getEndTime()&&this.track.ee.emit("fadein",r-this.track.getStartTime(),this.track)}static getClass(){return".state-fadein"}static getEvents(){return["click"]}},rt=class{constructor(t){this.track=t}setup(t,e){this.samplesPerPixel=t,this.sampleRate=e}click(t){const e=t.offsetX,r=g(e,this.samplesPerPixel,this.sampleRate);r>this.track.getStartTime()&&r<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-r,this.track)}static getClass(){return".state-fadeout"}static getEvents(){return["click"]}},nt={cursor:K,select:Q,shift:tt,fadein:et,fadeout:rt};class st{constructor(t,e,r,n,s,i,o,a){this.peaks=t,this.offset=e,this.color=n,this.bits=r,this.scale=s,this.height=i,this.barWidth=o,this.barGap=a}static drawFrame(t,e,r,n,s,i,o){const a=Math.abs(n*e),l=Math.abs(s*e);t.fillRect(r,0,i,e-l),t.fillRect(r,e+a,i,e-a),0!==o&&t.fillRect(r+i,0,o,2*e)}hook(t,e,r){if(void 0!==r&&r.peaks===this.peaks&&r.scale===this.scale&&r.height===this.height)return;const n=this.scale,s=t.width/n,i=t.getContext("2d"),o=t.height/n/2,a=2**(this.bits-1),l=this.barWidth,c=this.barGap,u=l+c;i.clearRect(0,0,t.width,t.height),i.save(),i.fillStyle=this.color,i.scale(n,n);for(let h=0;h<s;h+=u){const t=this.peaks[2*(h+this.offset)]/a,e=this.peaks[2*(h+this.offset)+1]/a;st.drawFrame(i,o,h,t,e,l,c)}i.restore()}}const it=st;var ot=r(6226);class at{constructor(t,e,r,n){this.type=t,this.shape=e,this.duration=r,this.samplesPerPixel=n}static createCurve(t,e,r){let n,s;switch(e){case J.Y1:n=1;break;case J.h7:n=-1;break;default:throw new Error("Unsupported fade type.")}switch(t){case J._h:s=(0,ot.sCurve)(r,n);break;case J.t$:s=(0,ot.linear)(r,n);break;case J.Jl:s=(0,ot.exponential)(r,n);break;case J.Hp:s=(0,ot.logarithmic)(r,10,n);break;default:throw new Error("Unsupported fade shape")}return s}hook(t,e,r){if(void 0!==r&&r.shape===this.shape&&r.type===this.type&&r.duration===this.duration&&r.samplesPerPixel===this.samplesPerPixel)return;const n=t.getContext("2d"),s=t.width,i=t.height,o=at.createCurve(this.shape,this.type,s),a=o.length;let l=i-o[0]*i;n.clearRect(0,0,t.width,t.height),n.save(),n.strokeStyle="black",n.beginPath(),n.moveTo(0,l);for(let c=1;c<a;c+=1)l=i-o[c]*i,n.lineTo(c,l);n.stroke(),n.restore()}}const lt=at,ct=class{constructor(t){this.gain=t}hook(t){t.value=100*this.gain,t.title=`${Math.round(100*this.gain)}% volume`}},ut=class{constructor(t){this.stereoPan=t}hook(t){let e;t.value=100*this.stereoPan,e=0===this.stereoPan?"Center":this.stereoPan<0?"Left":"Right";const r=`${Math.abs(Math.round(100*this.stereoPan))}% `;t.title=`Pan: ${0!==this.stereoPan?r:""}${e}`}},ht=1e3,dt=class{constructor(){this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0}setEventEmitter(t){this.ee=t}setName(t){this.name=t}setCustomClass(t){this.customClass=t}setWaveOutlineColor(t){this.waveOutlineColor=t}setCues(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}trim(t,e){const r=this.getStartTime(),n=this.getEndTime(),s=this.cueIn-r;if(r<=t&&n>=t||r<=e&&n>=e){const i=t<r?r:t,o=e>n?n:e;this.setCues(i+s,o+s),t>r&&this.setStartTime(t)}}setStartTime(t){this.startTime=t,this.endTime=t+this.duration}setPlayout(t){this.playout=t}setOfflinePlayout(t){this.offlinePlayout=t}setEnabledStates(t={}){const e={cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0};this.enabledStates=$()({},e,t)}setFadeIn(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade In");const r={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(J.Y1,r.shape,r.start,r.end)}setFadeOut(t,e="logarithmic"){if(t>this.duration)throw new Error("Invalid Fade Out");const r={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(J.h7,r.shape,r.start,r.end)}saveFade(t,e,r,n){const s=X();return this.fades[s]={type:t,shape:e,start:r,end:n},s}removeFade(t){delete this.fades[t]}setBuffer(t){this.buffer=t}setPeakData(t){this.peakData=t}calculatePeaks(t,e){const r=v(this.cueIn,e),n=v(this.cueOut,e);this.setPeaks(Y()(this.buffer,t,this.peakData.mono,r,n))}setPeaks(t){this.peaks=t}setState(t){if(this.state=t,this.state&&this.enabledStates[this.state]){const t=nt[this.state];this.stateObj=new t(this)}else this.stateObj=void 0}getStartTime(){return this.startTime}getEndTime(){return this.endTime}getDuration(){return this.duration}isPlaying(){return this.playout.isPlaying()}setShouldPlay(t){this.playout.setShouldPlay(t)}setGainLevel(t){this.gain=t,this.playout.setVolumeGainLevel(t)}setMasterGainLevel(t){this.playout.setMasterGainLevel(t)}setStereoPanValue(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}setEffects(t){this.effectsGraph=t,this.playout.setEffects(t)}schedulePlay(t,e,r,n){let s,i,o=t,a=r?r-e:void 0;const l={shouldPlay:!0,masterGain:1,isOffline:!1},c=$()({},l,n),u=c.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||a&&e+a<this.startTime)return Promise.resolve();this.startTime>=e?(s=0,o+=this.startTime-e,r?(a-=this.startTime-e,i=Math.min(a,this.duration)):i=this.duration):(s=e-this.startTime,i=r?Math.min(a,this.duration-s):this.duration-s),s+=this.cueIn;const h=e-this.startTime,d=u.setUpSource();return L()(this.fades,(e=>{let r,n;if(h<e.end)switch(h<=e.start?(r=t+(e.start-h),n=e.end-e.start):h>e.start&&h<e.end&&(r=t-(h-e.start),n=e.end-e.start),e.type){case J.Y1:u.applyFadeIn(r,n,e.shape);break;case J.h7:u.applyFadeOut(r,n,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}})),u.setVolumeGainLevel(this.gain),u.setShouldPlay(c.shouldPlay),u.setMasterGainLevel(c.masterGain),u.setStereoPanValue(this.stereoPan),u.play(o,s,i),d}scheduleStop(t=0){this.playout.stop(t)}renderOverlay(t){const e=b(t.playlistLength,t.resolution,t.sampleRate),r={attributes:{style:`position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ${e}px; z-index: 9;`}};let n="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);const e=nt[this.state],s=e.getEvents();s.forEach((t=>{r[`on${t}`]=this.stateObj[t].bind(this.stateObj)})),n=e.getClass()}return c()(`div.playlist-overlay${n}`,r)}renderControls(t){const e=t.muted?".active":"",r=t.soloed?".active":"",n=t.collapsed,s=this.peaks.data.length,i=t.controls.widgets,o=c()("button.btn.btn-danger.btn-xs.track-remove",{attributes:{type:"button",title:"Remove track"},onclick:()=>{this.ee.emit("removeTrack",this)}},[c()("i.fas.fa-times")]),a=c()("span",[this.name]),l=c()("button.btn.btn-info.btn-xs.track-collapse",{attributes:{type:"button",title:n?"Expand track":"Collapse track"},onclick:()=>{this.ee.emit("changeTrackView",this,{collapsed:!n})}},[c()("i.fas."+(n?"fa-caret-down":"fa-caret-up"))]),u=[];i.remove&&u.push(o),u.push(a),i.collapse&&u.push(l);const h=[c()("div.track-header",u)];return n||(i.muteOrSolo&&h.push(c()("div.btn-group",[c()(`button.btn.btn-outline-dark.btn-xs.btn-mute${e}`,{attributes:{type:"button"},onclick:()=>{this.ee.emit("mute",this)}},["Mute"]),c()(`button.btn.btn-outline-dark.btn-xs.btn-solo${r}`,{onclick:()=>{this.ee.emit("solo",this)}},["Solo"])])),i.volume&&h.push(c()("label.volume",[c()("input.volume-slider",{attributes:{"aria-label":"Track volume control",type:"range",min:0,max:100,value:100},hook:new ct(this.gain),oninput:t=>{this.ee.emit("volumechange",t.target.value,this)}})])),i.stereoPan&&h.push(c()("label.stereopan",[c()("input.stereopan-slider",{attributes:{"aria-label":"Track stereo pan control",type:"range",min:-100,max:100,value:100},hook:new ut(this.stereoPan),oninput:t=>{this.ee.emit("stereopan",t.target.value/100,this)}})]))),c()("div.controls",{attributes:{style:`height: ${s*t.height}px; width: ${t.controls.width}px; position: absolute; left: 0; z-index: 10;`}},h)}render(t){const e=this.peaks.length,r=b(t.playbackSeconds,t.resolution,t.sampleRate),n=b(this.startTime,t.resolution,t.sampleRate),s=b(this.endTime,t.resolution,t.sampleRate);let i=0;const o=this.peaks.data.length,a=Math.ceil(window.devicePixelRatio);r>0&&r>n&&(i=r<s?r-n:e);const l=[c()("div.cursor",{attributes:{style:`position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ${r}px; bottom: 0; z-index: 5;`}})],u=Object.keys(this.peaks.data).map((r=>{const s=[c()("div.channel-progress",{attributes:{style:`position: absolute; width: ${i}px; height: ${t.height}px; z-index: 2;`}})];let o=0,l=e;const u=this.peaks.data[r];while(l>0){const e=Math.min(l,ht),r=this.waveOutlineColor?this.waveOutlineColor:t.colors.waveOutlineColor;s.push(c()("canvas",{attributes:{width:e*a,height:t.height*a,style:`float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ${e}px; height: ${t.height}px;`},hook:new it(u,o,this.peaks.bits,r,a,t.height,t.barWidth,t.barGap)})),l-=e,o+=ht}if(this.fadeIn){const e=this.fades[this.fadeIn],r=b(e.end-e.start,t.resolution,t.sampleRate);s.push(c()("div.wp-fade.wp-fadein",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${r}px; top: 0; left: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:r,height:t.height},hook:new lt(e.type,e.shape,e.end-e.start,t.resolution)})]))}if(this.fadeOut){const e=this.fades[this.fadeOut],r=b(e.end-e.start,t.resolution,t.sampleRate);s.push(c()("div.wp-fade.wp-fadeout",{attributes:{style:`position: absolute; height: ${t.height}px; width: ${r}px; top: 0; right: 0; z-index: 4;`}},[c()("canvas",{attributes:{width:r,height:t.height},hook:new lt(e.type,e.shape,e.end-e.start,t.resolution)})]))}return c()(`div.channel.channel-${r}`,{attributes:{style:`height: ${t.height}px; width: ${e}px; top: ${r*t.height}px; left: ${n}px; position: absolute; margin: 0; padding: 0; z-index: 1;`}},s)}));if(l.push(u),l.push(this.renderOverlay(t)),!0===t.isActive){const e=b(t.timeSelection.start,t.resolution,t.sampleRate),r=b(t.timeSelection.end,t.resolution,t.sampleRate),n=r-e+1,s=n>1?".segment":".point";l.push(c()(`div.selection${s}`,{attributes:{style:`position: absolute; width: ${n}px; bottom: 0; top: 0; left: ${e}px; z-index: 4;`}}))}const h=c()("div.waveform",{attributes:{style:`height: ${o*t.height}px; position: relative;`}},l),d=[];let p=0;t.controls.show&&(d.push(this.renderControls(t)),p=t.controls.width),d.push(h);const f=t.shouldPlay?"":".silent",m=void 0===this.customClass?"":`.${this.customClass}`;return c()(`div.channel-wrapper${f}${m}`,{attributes:{style:`margin-left: ${p}px; height: ${t.height*o}px;`}},d)}getTrackDetails(){const t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut,stereoPan:this.stereoPan,gain:this.gain,effects:this.effectsGraph};if(this.fadeIn){const e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){const e=this.fades[this.fadeOut];t.fadeOut={shape:e.shape,duration:e.end-e.start}}return t}};function pt(t,e){t.connect(e)}const ft=class{constructor(t,e,r=t.createGain()){this.ac=t,this.gain=1,this.effectsGraph=pt,this.masterEffectsGraph=pt,this.buffer=e,this.masterGain=r,this.destination=this.ac.destination}applyFade(t,e,r,n="logarithmic"){if(t===J.Y1)(0,J.L7)(this.fadeGain.gain,n,e,r);else{if(t!==J.h7)throw new Error("Unsupported fade type");(0,J.Mt)(this.fadeGain.gain,n,e,r)}}applyFadeIn(t,e,r="logarithmic"){this.applyFade(J.Y1,t,e,r)}applyFadeOut(t,e,r="logarithmic"){this.applyFade(J.h7,t,e,r)}isPlaying(){return void 0!==this.source}getDuration(){return this.buffer.duration}setAudioContext(t){this.ac=t,this.destination=this.ac.destination}createStereoPanner(){return this.ac.createStereoPanner?this.ac.createStereoPanner():this.ac.createPanner()}setUpSource(){let t,e;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;const r=new Promise((r=>{this.source.onended=()=>{this.source.disconnect(),this.fadeGain.disconnect(),this.volumeGain.disconnect(),this.shouldPlayGain.disconnect(),this.panner.disconnect(),t&&t(),e&&e(),this.source=void 0,this.fadeGain=void 0,this.volumeGain=void 0,this.shouldPlayGain=void 0,this.panner=void 0,r()}}));return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.panner=this.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.panner),t=this.effectsGraph(this.panner,this.masterGain,this.ac instanceof OfflineAudioContext),e=this.masterEffectsGraph(this.masterGain,this.destination,this.ac instanceof OfflineAudioContext),r}setVolumeGainLevel(t){this.volumeGain&&(this.volumeGain.gain.value=t)}setShouldPlay(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}setMasterGainLevel(t){this.masterGain&&(this.masterGain.gain.value=t)}setStereoPanValue(t=0){this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=t:(this.panner.panningModel="equalpower",this.panner.setPosition(t,0,1-Math.abs(t))))}setEffects(t=pt){this.effectsGraph=t}setMasterEffects(t=pt){this.masterEffectsGraph=t}play(t,e,r){this.source.start(t,e,r)}stop(t=0){this.source&&this.source.stop(t)}};function mt(t){const e={id:t.id||X(),start:Number(t.begin)||0,end:Number(t.end)||0,lines:t.lines||[""],lang:t.language||"en"};return e}function vt(t){return{begin:String(t.start.toFixed(3)),end:String(t.end.toFixed(3)),id:String(t.id),language:t.lang,lines:t.lines}}const gt=class{constructor(t,e={}){this.playlist=t,this.data=e,this.active=!1,this.ondragover=t=>{this.active&&(t.preventDefault(),this.emitDrag(t.clientX))}}emitDrag(t){const e=t-this.prevX;if(e){const r=g(e,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=t,this.playlist.ee.emit("dragged",r,this.data)}}complete(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}dragstart(t){const e=t;this.active=!0,this.prevX=t.clientX,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}dragend(t){this.active&&(t.preventDefault(),this.complete())}static getClass(){return".shift"}static getEvents(){return["dragstart","dragend"]}},bt=function(){};bt.prototype.hook=function(t){const e=t.querySelector(".current");if(e){const r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=n.top-r.top,i=t;i.scrollTop+=s}};const yt=bt;function wt(t){function e(t,e){const r=parseInt(t/3600,10)%24,n=parseInt(t/60,10)%60,s=(t%60).toFixed(e),i=r<10?`0${r}`:r,o=n<10?`0${n}`:n,a=s<10?`0${s}`:s;return`${i}:${o}:${a}`}const r={seconds(t){return t.toFixed(0)},thousandths(t){return t.toFixed(3)},"hh:mm:ss":function(t){return e(t,0)},"hh:mm:ss.u":function(t){return e(t,1)},"hh:mm:ss.uu":function(t){return e(t,2)},"hh:mm:ss.uuu":function(t){return e(t,3)}};return r[t]}class kt{constructor(t,e,r=[],n=!1,s=!1,i=!1,o=0){this.playlist=t,this.marginLeft=o,this.resizeHandlers=[],this.editable=n,this.annotations=e.map((t=>mt(t))),this.setupInteractions(),this.controls=r,this.setupEE(t.ee),this.playlist.isContinuousPlay=i,this.playlist.linkEndpoints=s,this.length=this.annotations.length}setupInteractions(){this.annotations.forEach(((t,e)=>{const r=new gt(this.playlist,{direction:"left",index:e}),n=new gt(this.playlist,{direction:"right",index:e});this.resizeHandlers.push(r),this.resizeHandlers.push(n)}))}setupEE(t){return t.on("dragged",((t,e)=>{const r=e.index,n=this.annotations,s=n[r];if("left"===e.direction){const e=s.start;s.start+=t,s.start<0&&(s.start=0),r&&n[r-1].end>s.start&&(n[r-1].end=s.start),this.playlist.linkEndpoints&&r&&n[r-1].end===e&&(n[r-1].end=s.start)}else{const e=s.end;s.end+=t,s.end>this.playlist.duration&&(s.end=this.playlist.duration),r<n.length-1&&n[r+1].start<s.end&&(n[r+1].start=s.end),this.playlist.linkEndpoints&&r<n.length-1&&n[r+1].start===e&&(n[r+1].start=s.end)}this.playlist.drawRequest()})),t.on("continuousplay",(t=>{this.playlist.isContinuousPlay=t})),t.on("linkendpoints",(t=>{this.playlist.linkEndpoints=t})),t.on("annotationsrequest",(()=>{this.export()})),t}export(){const t=this.annotations.map((t=>vt(t))),e=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`,r=document.createElement("a");document.body.appendChild(r),r.href=e,r.download="annotations.json",r.click(),document.body.removeChild(r)}renderResizeLeft(t){const e=gt.getEvents(),r={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},n=this.resizeHandlers[2*t];return e.forEach((t=>{r[`on${t}`]=n[t].bind(n)})),c()("div.resize-handle.resize-w",r)}renderResizeRight(t){const e=gt.getEvents(),r={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},n=this.resizeHandlers[2*t+1];return e.forEach((t=>{r[`on${t}`]=n[t].bind(n)})),c()("div.resize-handle.resize-e",r)}renderControls(t,e){const r=this;return this.controls.map((n=>c()(`i.${n.class}`,{attributes:{title:n.title},onclick:()=>{n.action(t,e,r.annotations,{linkEndpoints:r.playlist.linkEndpoints}),this.setupInteractions(),r.playlist.drawRequest()}})))}render(){const t=c()("div.annotations-boxes",{attributes:{style:`height: 30px; position: relative; margin-left: ${this.marginLeft}px;`}},this.annotations.map(((t,e)=>{const r=this.playlist.samplesPerPixel,n=this.playlist.sampleRate,s=n/r,i=b(this.playlist.scrollLeft,r,n),o=Math.floor(t.start*s-i),a=Math.ceil(t.end*s-t.start*s);return c()("div.annotation-box",{attributes:{style:`position: absolute; height: 30px; width: ${a}px; left: ${o}px`,"data-id":t.id}},[this.renderResizeLeft(e),c()("span.id",{onclick:()=>{const t=this.annotations[e].start,r=this.annotations[e].end;this.playlist.isContinuousPlay?(this.playlist.seek(t,t),this.playlist.ee.emit("play",t)):(this.playlist.seek(t,r),this.playlist.ee.emit("play",t,r))}},[t.id]),this.renderResizeRight(e)])}))),e=c()("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[t]),r=c()("div.annotations-text",{hook:new yt},this.annotations.map(((t,e)=>{const r=wt(this.playlist.durationFormat),n=r(t.start),s=r(t.end);let i="";this.playlist.isPlaying()&&this.playlist.playbackSeconds>=t.start&&this.playlist.playbackSeconds<=t.end&&(i=".current");const o={attributes:{contenteditable:!0},oninput:e=>{t.lines=[e.target.innerText]},onkeypress:t=>{13!==t.which&&13!==t.keyCode||(t.target.blur(),t.preventDefault())}},a=this.editable?o:{};return c()(`div.annotation${i}`,[c()("span.annotation-id",[t.id]),c()("span.annotation-start",[n]),c()("span.annotation-end",[s]),c()("span.annotation-lines",a,[t.lines]),c()("span.annotation-actions",this.renderControls(t,e))])})));return c()("div.annotations",[e,r])}}const xt=kt;function _t(){function t(t){let e,r=1/0,n=-1/0;for(let s=0;s<t.length;s+=1)e=t[s],r>e&&(r=e),n<e&&(n=e);return{min:r,max:n}}function e(t,e){const r=2**(e-1),n=t<0?t*r:t*r-1;return Math.max(-r,Math.min(r-1,n))}function r(r,n,s){const i=r.length,o=Math.ceil(i/n);let a,l,c,u,h,d;const p=new self[`Int${s}Array`](2*o);for(let f=0;f<o;f+=1)a=f*n,l=(f+1)*n>i?i:(f+1)*n,c=r.subarray(a,l),d=t(c),h=e(d.min,s),u=e(d.max,s),p[2*f]=h,p[2*f+1]=u;return p}function n(t,e=1e4,n=8){if([8,16,32].indexOf(n)<0)throw new Error("Invalid number of bits specified for peaks.");const s=[],i=0,o=t.length;s.push(r(t.subarray(i,o),e,n));const a=s[0].length/2;return{bits:n,length:a,data:s}}onmessage=function(t){const e=n(t.data.samples,t.data.samplesPerPixel);postMessage(e)}}function Pt(){let t,e=0,r=[],n=[];function s(e){t=e.sampleRate}function i(t){r.push(t[0]),n.push(t[1]),e+=t[0].length}function o(t,e,r){for(let n=0;n<r.length;n+=1)t.setUint8(e+n,r.charCodeAt(n))}function a(t,e,r){let n=e;for(let s=0;s<r.length;s+=1,n+=2){const e=Math.max(-1,Math.min(1,r[s]));t.setInt16(n,e<0?32768*e:32767*e,!0)}}function l(e,r=!1){const n=new ArrayBuffer(44+2*e.length),s=new DataView(n);return o(s,0,"RIFF"),s.setUint32(4,32+2*e.length,!0),o(s,8,"WAVE"),o(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,r?1:2,!0),s.setUint32(24,t,!0),s.setUint32(28,4*t,!0),s.setUint16(32,4,!0),s.setUint16(34,16,!0),o(s,36,"data"),s.setUint32(40,2*e.length,!0),a(s,44,e),s}function c(t,e){const r=new Float32Array(e);let n=0;for(let s=0;s<t.length;s+=1)r.set(t[s],n),n+=t[s].length;return r}function u(t,e){const r=t.length+e.length,n=new Float32Array(r);let s=0,i=0;while(s<r)n[s+=1]=t[i],n[s+=1]=e[i],i+=1;return n}function h(t){const s=c(r,e),i=c(n,e),o=u(s,i),a=l(o),h=new Blob([a],{type:t});postMessage(h)}function d(){e=0,r=[],n=[]}onmessage=function(t){switch(t.data.command){case"init":s(t.data.config);break;case"record":i(t.data.buffer);break;case"exportWAV":h(t.data.type);break;case"clear":d();break;default:throw new Error("Unknown export worker command")}}}const St=class{constructor(){this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.collapsedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}initExporter(){this.exportWorker=new(m())(Pt)}initRecorder(t){this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=()=>{const t=new dt;t.setName("Recording"),t.setEnabledStates(),t.setEventEmitter(this.ee),this.recordingTrack=t,this.tracks.push(t),this.chunks=[],this.working=!1},this.mediaRecorder.ondataavailable=t=>{if(this.chunks.push(t.data),!this.working){const t=new Blob(this.chunks,{type:"audio/ogg; codecs=opus"}),e=O.createLoader(t,this.ac);e.load().then((t=>{this.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:this.samplesPerPixel}),this.recordingTrack.setCues(0,t.duration),this.recordingTrack.setBuffer(t),this.recordingTrack.setPlayout(new ft(this.ac,t,this.masterGainNode)),this.adjustDuration()})).catch((()=>{this.working=!1})),this.working=!0}},this.mediaRecorder.onstop=()=>{this.chunks=[],this.working=!1},this.recorderWorker=new(m())(_t),this.recorderWorker.onmessage=t=>{this.recordingTrack.setPeaks(t.data),this.working=!1,this.drawRequest()}}setShowTimeScale(t){this.showTimescale=t}setMono(t){this.mono=t}setExclSolo(t){this.exclSolo=t}setSeekStyle(t){this.seekStyle=t}getSeekStyle(){return this.seekStyle}setSampleRate(t){this.sampleRate=t}setSamplesPerPixel(t){this.samplesPerPixel=t}setAudioContext(t){this.ac=t,this.masterGainNode=t.createGain()}getAudioContext(){return this.ac}setControlOptions(t){this.controls=t}setWaveHeight(t){this.waveHeight=t}setCollapsedWaveHeight(t){this.collapsedWaveHeight=t}setColors(t){this.colors=t}setBarWidth(t){this.barWidth=t}setBarGap(t){this.barGap=t}setAnnotations(t){const e=this.controls.show?this.controls.width:0;this.annotationList=new xt(this,t.annotations,t.controls,t.editable,t.linkEndpoints,t.isContinuousPlay,e)}setEffects(t){this.effectsGraph=t}setEventEmitter(t){this.ee=t}getEventEmitter(){return this.ee}setUpEventEmitter(){const t=this.ee;t.on("automaticscroll",(t=>{this.isAutomaticScroll=t})),t.on("durationformat",(t=>{this.durationFormat=t,this.drawRequest()})),t.on("select",((t,e,r)=>{this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.seek(t,e,r),this.ee.emit("timeupdate",t),this.drawRequest())})),t.on("startaudiorendering",(t=>{this.startOfflineRender(t)})),t.on("statechange",(t=>{this.setState(t),this.drawRequest()})),t.on("shift",((t,e)=>{e.setStartTime(e.getStartTime()+t),this.adjustDuration(),this.drawRequest()})),t.on("record",(()=>{this.record()})),t.on("play",((t,e)=>{this.play(t,e)})),t.on("pause",(()=>{this.pause()})),t.on("stop",(()=>{this.stop()})),t.on("rewind",(()=>{this.rewind()})),t.on("fastforward",(()=>{this.fastForward()})),t.on("clear",(()=>{this.clear().then((()=>{this.drawRequest()}))})),t.on("solo",(t=>{this.soloTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("mute",(t=>{this.muteTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("removeTrack",(t=>{this.removeTrack(t),this.adjustTrackPlayout(),this.drawRequest()})),t.on("changeTrackView",((t,e)=>{this.collapseTrack(t,e),this.drawRequest()})),t.on("volumechange",((t,e)=>{e.setGainLevel(t/100),this.drawRequest()})),t.on("mastervolumechange",(t=>{this.masterGain=t/100,this.tracks.forEach((t=>{t.setMasterGainLevel(this.masterGain)}))})),t.on("fadein",((t,e)=>{e.setFadeIn(t,this.fadeType),this.drawRequest()})),t.on("fadeout",((t,e)=>{e.setFadeOut(t,this.fadeType),this.drawRequest()})),t.on("stereopan",((t,e)=>{e.setStereoPanValue(t),this.drawRequest()})),t.on("fadetype",(t=>{this.fadeType=t})),t.on("newtrack",(t=>{this.load([{src:t,name:t.name}])})),t.on("trim",(()=>{const t=this.getActiveTrack(),e=this.getTimeSelection();t.trim(e.start,e.end),t.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.setTimeSelection(0,0),this.drawRequest()})),t.on("zoomin",(()=>{const t=Math.max(0,this.zoomIndex-1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())})),t.on("zoomout",(()=>{const t=Math.min(this.zoomLevels.length-1,this.zoomIndex+1),e=this.zoomLevels[t];e!==this.samplesPerPixel&&(this.setZoom(e),this.drawRequest())})),t.on("scroll",(()=>{this.isScrolling=!0,this.drawRequest(),clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((()=>{this.isScrolling=!1}),200)}))}load(t){const e=t.map((t=>{const e=O.createLoader(t.src,this.ac,this.ee);return e.load().then((t=>t.sampleRate===this.sampleRate?t:y(t,this.sampleRate)))}));return Promise.all(e).then((e=>{this.ee.emit("audiosourcesloaded");const r=e.map(((e,r)=>{const n=t[r],s=n.name||"Untitled",i=n.start||0,o=n.states||{},a=n.fadeIn,l=n.fadeOut,c=n.cuein||0,u=n.cueout||e.duration,h=n.gain||1,d=n.muted||!1,p=n.soloed||!1,f=n.selected,m=n.peaks||{type:"WebAudio",mono:this.mono},v=n.customClass||void 0,g=n.waveOutlineColor||void 0,b=n.stereoPan||0,y=n.effects||null,w=new ft(this.ac,e,this.masterGainNode),k=new dt;return k.src=n.src,k.setBuffer(e),k.setName(s),k.setEventEmitter(this.ee),k.setEnabledStates(o),k.setCues(c,u),k.setCustomClass(v),k.setWaveOutlineColor(g),void 0!==a&&k.setFadeIn(a.duration,a.shape),void 0!==l&&k.setFadeOut(l.duration,l.shape),void 0!==f&&(this.setActiveTrack(k),this.setTimeSelection(f.start,f.end)),void 0!==m&&k.setPeakData(m),k.setState(this.getState()),k.setStartTime(i),k.setPlayout(w),k.setGainLevel(h),k.setStereoPanValue(b),y&&k.setEffects(y),d&&this.muteTrack(k),p&&this.soloTrack(k),k.calculatePeaks(this.samplesPerPixel,this.sampleRate),k}));this.tracks=this.tracks.concat(r),this.adjustDuration(),this.draw(this.render()),this.ee.emit("audiosourcesrendered")})).catch((t=>{this.ee.emit("audiosourceserror",t)}))}setActiveTrack(t){this.activeTrack=t}getActiveTrack(){return this.activeTrack}isSegmentSelection(){return this.timeSelection.start!==this.timeSelection.end}setTimeSelection(t=0,e){this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}async startOfflineRender(t){if(this.isRendering)return;this.isRendering=!0,this.offlineAudioContext=new OfflineAudioContext(2,44100*this.duration,44100);const e=[];this.ee.emit("audiorenderingstarting",this.offlineAudioContext,e);const r=this.offlineAudioContext.currentTime,n=this.offlineAudioContext.createGain();this.tracks.forEach((t=>{const e=new ft(this.offlineAudioContext,t.buffer,n);e.setEffects(t.effectsGraph),e.setMasterEffects(this.effectsGraph),t.setOfflinePlayout(e),t.schedulePlay(r,0,0,{shouldPlay:this.shouldTrackPlay(t),masterGain:1,isOffline:!0})})),await Promise.all(e);const s=await this.offlineAudioContext.startRendering();"buffer"===t?(this.ee.emit("audiorenderingfinished",t,s),this.isRendering=!1):"wav"===t&&(this.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),this.exportWorker.onmessage=e=>{this.ee.emit("audiorenderingfinished",t,e.data),this.isRendering=!1,this.exportWorker.postMessage({command:"clear"})},this.exportWorker.postMessage({command:"record",buffer:[s.getChannelData(0),s.getChannelData(1)]}),this.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}getTimeSelection(){return this.timeSelection}setState(t){this.state=t,this.tracks.forEach((e=>{e.setState(t)}))}getState(){return this.state}setZoomIndex(t){this.zoomIndex=t}setZoomLevels(t){this.zoomLevels=t}setZoom(t){this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach((e=>{e.calculatePeaks(t,this.sampleRate)}))}muteTrack(t){const e=this.mutedTracks.indexOf(t);e>-1?this.mutedTracks.splice(e,1):this.mutedTracks.push(t)}soloTrack(t){const e=this.soloedTracks.indexOf(t);e>-1?this.soloedTracks.splice(e,1):this.exclSolo?this.soloedTracks=[t]:this.soloedTracks.push(t)}collapseTrack(t,e){if(e.collapsed)this.collapsedTracks.push(t);else{const e=this.collapsedTracks.indexOf(t);e>-1&&this.collapsedTracks.splice(e,1)}}removeTrack(t){t.isPlaying()&&t.scheduleStop();const e=[this.mutedTracks,this.soloedTracks,this.collapsedTracks,this.tracks];e.forEach((e=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)}))}adjustTrackPlayout(){this.tracks.forEach((t=>{t.setShouldPlay(this.shouldTrackPlay(t))}))}adjustDuration(){this.duration=this.tracks.reduce(((t,e)=>Math.max(t,e.getEndTime())),0)}shouldTrackPlay(t){let e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}isPlaying(){return this.tracks.reduce(((t,e)=>t||e.isPlaying()),!1)}getCurrentTime(){const t=this.lastSeeked||this.pausedAt||this.cursor;return t+this.getElapsedTime()}getElapsedTime(){return this.ac.currentTime-this.lastPlay}setMasterGain(t){this.ee.emit("mastervolumechange",t)}restartPlayFrom(t,e){return this.stopAnimation(),this.tracks.forEach((t=>{t.scheduleStop()})),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}play(t,e){clearTimeout(this.resetDrawTimer);const r=this.ac.currentTime,n=this.getTimeSelection(),s=[],i=t||this.pausedAt||this.cursor;let o=e;return!o&&n.end!==n.start&&n.end>i&&(o=n.end),this.isPlaying()?this.restartPlayFrom(i,o):(this.effectsGraph&&this.tracks&&this.tracks[0].playout.setMasterEffects(this.effectsGraph),this.tracks.forEach((t=>{t.setState("cursor"),s.push(t.schedulePlay(r,i,o,{shouldPlay:this.shouldTrackPlay(t),masterGain:this.masterGain}))})),this.lastPlay=r,this.playoutPromises=s,this.startAnimation(i),Promise.all(this.playoutPromises))}pause(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}stop(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}playbackReset(){return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach((t=>{t.scheduleStop(),t.setState(this.getState())})),this.masterGainNode.disconnect(),this.drawRequest(),Promise.all(this.playoutPromises)}rewind(){return this.stop().then((()=>{this.scrollLeft=0,this.ee.emit("select",0,0)}))}fastForward(){return this.stop().then((()=>{this.viewDuration<this.duration?this.scrollLeft=this.duration-this.viewDuration:this.scrollLeft=0,this.ee.emit("select",this.duration,this.duration)}))}clear(){return this.stop().then((()=>{this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.seek(0,0,void 0)}))}record(){const t=[];this.mediaRecorder.start(300),this.tracks.forEach((e=>{e.setState("none"),t.push(e.schedulePlay(this.ac.currentTime,0,void 0,{shouldPlay:this.shouldTrackPlay(e)}))})),this.playoutPromises=t}startAnimation(t){this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame((()=>{this.updateEditor(t)}))}stopAnimation(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}seek(t,e,r){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(r||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"===this.getSeekStyle()&&(this.playbackSeconds=t))}updateEditor(t){const e=this.ac.currentTime,r=this.getTimeSelection(),n=t||this.cursor,s=e-this.lastDraw;if(this.isPlaying()){const t=n+s;this.ee.emit("timeupdate",t),this.animationRequest=window.requestAnimationFrame((()=>{this.updateEditor(t)})),this.playbackSeconds=t,this.draw(this.render()),this.lastDraw=e}else n+s>=(this.isSegmentSelection()?r.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout((()=>{this.pausedAt=void 0,this.lastSeeked=void 0,this.setState(this.getState()),this.playbackSeconds=0,this.draw(this.render())}),0)}drawRequest(){window.requestAnimationFrame((()=>{this.draw(this.render())}))}draw(t){const e=h()(this.tree,t);this.rootNode=p()(this.rootNode,e),this.tree=t,this.viewDuration=g(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}getTrackRenderData(t={}){const r={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors,barWidth:this.barWidth,barGap:this.barGap};return e()({},t,r)}isActiveTrack(t){const e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}renderAnnotations(){return this.annotationList.render()}renderTimeScale(){const t=this.controls.show?this.controls.width:0,e=new A(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,t,this.colors);return e.render()}renderTrackSection(){const t=this.tracks.map((t=>{const e=this.collapsedTracks.indexOf(t)>-1;return t.render(this.getTrackRenderData({isActive:this.isActiveTrack(t),shouldPlay:this.shouldTrackPlay(t),soloed:this.soloedTracks.indexOf(t)>-1,muted:this.mutedTracks.indexOf(t)>-1,collapsed:e,height:e?this.collapsedWaveHeight:this.waveHeight,barGap:this.barGap,barWidth:this.barWidth}))}));return c()("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:t=>{this.scrollLeft=g(t.target.scrollLeft,this.samplesPerPixel,this.sampleRate),this.ee.emit("scroll")},hook:new R(this)},t)}render(){const t=[];return this.showTimescale&&t.push(this.renderTimeScale()),t.push(this.renderTrackSection()),this.annotationList.length&&t.push(this.renderAnnotations()),c()("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},t)}getInfo(){const t=[];return this.tracks.forEach((e=>{t.push(e.getTrackDetails())})),{tracks:t,effects:this.effectsGraph}}};function Tt(t={},r=a()()){if(void 0===t.container)throw new Error("DOM element container must be given.");const n={samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150,widgets:{muteOrSolo:!0,volume:!0,stereoPan:!0,collapse:!0,remove:!0}},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,collapsedWaveHeight:30,barWidth:1,barGap:0,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1},s=e()({},t,n),o=s.zoomLevels.indexOf(s.samplesPerPixel);if(-1===o)throw new Error("initial samplesPerPixel must be included in array zoomLevels");const l=new St,c=s.ac||new AudioContext;l.setAudioContext(c),l.setSampleRate(s.sampleRate||c.sampleRate),l.setSamplesPerPixel(s.samplesPerPixel),l.setEventEmitter(r),l.setUpEventEmitter(),l.setTimeSelection(0,0),l.setState(s.state),l.setControlOptions(s.controls),l.setWaveHeight(s.waveHeight),l.setCollapsedWaveHeight(s.collapsedWaveHeight),l.setColors(s.colors),l.setZoomLevels(s.zoomLevels),l.setZoomIndex(o),l.setMono(s.mono),l.setExclSolo(s.exclSolo),l.setShowTimeScale(s.timescale),l.setSeekStyle(s.seekStyle),l.setAnnotations(s.annotationList),l.setBarGap(s.barGap),l.setBarWidth(s.barWidth),l.isAutomaticScroll=s.isAutomaticScroll,l.isContinuousPlay=s.isContinuousPlay,l.linkedEndpoints=s.linkedEndpoints,s.effects&&l.setEffects(s.effects);const u=l.render(),h=i()(u);return s.container.appendChild(h),l.tree=u,l.rootNode=h,l}function Et(t={},e=a()()){return Tt(t,e)}})(),n})()}))},90741:function(t,e,r){var n=r(32742);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var s=r(31982).Z;s("7790aa26",n,!0,{sourceMap:!1,shadowMode:!1})},9243:function(t,e,r){var n=r(43238);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var s=r(31982).Z;s("174d71af",n,!0,{sourceMap:!1,shadowMode:!1})},77203:function(t,e,r){var n=r(3129);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var s=r(31982).Z;s("31071e86",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=875.js.map