(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[841],{60674:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_mediaPicker"},[i("PickMediaFromProjects",{attrs:{path:t.current_project_path,select_mode:t.select_mode},on:{addMedias:function(e){return t.$emit("addMedias",e)},close:function(e){return t.$emit("close")}}})],1)},a=[],s={props:{publication_path:String,select_mode:{type:String,default:"multiple"}},components:{},data(){return{}},async created(){},beforeDestroy(){},watch:{},computed:{current_project_path(){const t=this.getParent(this.publication_path);return this.getParent(t)}},methods:{}},o=s,r=i(1001),l=(0,r.Z)(o,n,a,!1,null,"18247ea0",null),c=l.exports},50841:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return k}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_mapView"},[t.can_edit||t.sections.length>1?i("LayersPane",{attrs:{publication_path:t.publication.$path,sections:t.sections,opened_section:t.opened_section,opened_section_modules_list:t.opened_section_modules_list,default_layer_color:t.default_layer_color,can_edit:t.can_edit},on:{createSection:function(e){return t.$emit("createSection",e)},openSection:function(e){return t.$emit("openSection",e)},closeSection:function(e){return t.$emit("closeSection")},updateOrder:function(e){return t.$emit("updateOrder",e)},addModule:function(e){return t.$emit("addModule",e)},insertModule:function(e){return t.$emit("insertModule",e)},moveModuleTo:function(e){return t.$emit("moveModuleTo",e)},removeModule:function(e){return t.$emit("removeModule",e)},duplicatePublicationMedia:function(e){return t.$emit("duplicatePublicationMedia",e)}}}):t._e(),i("DisplayOnMap",{staticClass:"_mapContainer",attrs:{start_coords:!1,start_zoom:t.start_zoom,pins:t.pins,is_small:!1}}),t._e()],1)},a=[],s=(i(57658),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_layersPane"},[i("DetailsPane",{ref:"details",attrs:{header:t.$t("layers"),icon:"card-list",has_items:t.sections.length>0&&t.sections.length,is_open_initially:!0,can_be_toggled:!1}},[i("SlickList",{staticClass:"_list",attrs:{axis:"y",value:t.sections,useDragHandle:!0},on:{input:function(e){return t.$emit("updateOrder",e)}}},t._l(t.sections,(function(e,n){return i("SlickItem",{key:e.$path,staticClass:"_summaryItem",class:{"is--active":t.isActive(e.$path)},attrs:{index:n}},[t.can_edit?i("span",{directives:[{name:"handle",rawName:"v-handle"}],staticClass:"u-dragHandle"},[i("sl-icon",{attrs:{name:"grip-vertical",label:"Déplacer"}})],1):t._e(),i("span",{staticClass:"_colorInd",style:"background-color: "+(e.section_color||t.default_layer_color)}),i("span",{staticClass:"_clickZone",on:{click:function(i){return t.openSection(e.$path)}}},[i("h4",{staticClass:"_title"},[e.section_title?i("span",[t._v(" "+t._s(e.section_title)+" ")]):i("span",{domProps:{innerHTML:t._s("<i>"+t.$t("untitled")+"</i>")}})])])])})),1),t.can_edit?[t.sections.length>0?[i("hr")]:t._e(),i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("createSection")}}},[t._v(" "+t._s(t.$t("create_layer"))+" ")])]:t._e()],2),t.opened_section?i("div",{staticClass:"_openedLayer"},[i("div",{staticClass:"_closeLayerBtn"},[i("sl-button",{attrs:{variant:"default",size:"medium",circle:""},on:{click:function(e){return t.$emit("closeSection")}}},[i("sl-icon",{attrs:{name:"x-lg",label:t.$t("close")}})],1)],1),i("div",{staticClass:"_openedLayer--content"},[i("div",{staticClass:"_title"},[i("TitleField",{attrs:{field_name:"section_title",label:t.can_edit?t.$t("layer_title"):"",content:t.opened_section.section_title,path:t.opened_section.$path,maxlength:120,tag:"h3",can_edit:t.can_edit}})],1),i("div",{staticClass:"_color"},[i("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("pins_color"),can_toggle:!1,default_value:t.default_layer_color,value:t.opened_section.section_color},on:{save:function(e){return t.updateOpenedLayer({field:"section_color",value:e})}}})],1),t._l(t.opened_section_modules_list,(function(e,n){var a=e.meta_filename,s=e._module;return i("MapModule",{key:a,attrs:{index:n,mapmodule:s},on:{repickLocation:function(e){return t.repickLocation(s.$path)},remove:function(e){return t.$emit("removeModule",a)}}})})),i("hr"),i("ModuleCreator",{attrs:{publication_path:t.publication_path,is_collapsed:!1,context:"cartography",types_available:["medias"]},on:{addModule:function(e){return t.$emit("addModule",e)}}})],2)]):t._e(),t.is_repicking_location_for?i("div",{staticClass:"_repickNotice"},[t._v(" "+t._s(t.$t("click_on_map_to_repick_location_for_media"))+" "+t._s(t.is_repicking_location_for_index)+" "),i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.is_repicking_location_for=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")])]):t._e()],1)}),o=[],r=i(55656),l=i(14962),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_mapModule",on:{click:t.openPin}},[i("label",[t._v(" "+t._s(t.index+1)+" ")]),t.first_media?i("MediaContent",{staticClass:"_preview",attrs:{file:t.first_media,resolution:50,context:"preview"}}):t._e(),i("div",{},[i("small",[t.mapmodule.location&&t.mapmodule.location.latitude&&t.mapmodule.location.longitude?[t._v(" "+t._s(t.mapmodule.location.latitude)+" / "+t._s(t.mapmodule.location.longitude)+" ")]:[t._v(" "+t._s(t.$t("no_coordinates"))+" ")]],2)]),i("button",{staticClass:"u-button u-button_red u-button_icon",attrs:{type:"button"},on:{click:function(e){return t.$emit("repickLocation")}}},[i("b-icon",{attrs:{icon:"pin-map-fill"}})],1),i("button",{staticClass:"u-button u-button_transparent u-button_icon",attrs:{type:"button"},on:{click:t.removeModule}},[i("b-icon",{attrs:{icon:"trash"}})],1)],1)},u=[],d={props:{index:Number,mapmodule:Object},components:{},data(){return{}},i18n:{messages:{fr:{}}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{first_media(){try{const t=this.mapmodule.source_medias[0],e=this.getParent(this.mapmodule.$path);return this.getSourceMedia({source_media:t,folder_path:e})}catch(t){return!1}}},methods:{openPin(){this.$eventHub.$emit("publication.map.openPin",this.mapmodule.$path)},removePin(){this.$eventHub.$emit("publication.map.openPin",this.mapmodule.$path)},async removeModule(){await this.$api.deleteItem({path:this.mapmodule.$path}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t})),this.$emit("remove")}}},h=d,p=(i(21493),i(1001)),f=(0,p.Z)(h,c,u,!1,null,"a91cee24",null),m=f.exports,_={props:{publication_path:String,sections:Array,opened_section:[Boolean,Object],opened_section_modules_list:Array,default_layer_color:String,can_edit:Boolean},components:{SlickItem:r.SlickItem,SlickList:r.SlickList,ModuleCreator:l.Z,MapModule:m},directives:{handle:r.HandleDirective},data(){return{is_repicking_location_for:!1}},created(){},mounted(){this.$eventHub.$on("sections.open_summary",this.openSummary),this.$eventHub.$on("publication.map.click",this.setRepickLocation)},beforeDestroy(){this.$eventHub.$off("sections.open_summary",this.openSummary),this.$eventHub.$off("publication.map.click",this.setRepickLocation)},watch:{},computed:{is_repicking_location_for_index(){return this.opened_section_modules_list.findIndex((({_module:t})=>this.is_repicking_location_for===t.$path))}},methods:{openSummary(){this.$refs.details.$el.open=!0},closeSummary(){this.$refs.details.$el.open=!1},openSection(t){this.$emit("openSection",t)},isActive(t){return this.opened_section&&t===this.opened_section.$path},repickLocation(t){this.is_repicking_location_for=t},async setRepickLocation([t,e]){this.is_repicking_location_for&&(await this.$api.updateMeta({path:this.is_repicking_location_for,new_meta:{location:{longitude:t,latitude:e}}}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t})),this.is_repicking_location_for=!1)},async updateOpenedLayer({field:t,value:e}){await this.$api.updateMeta({path:this.opened_section.$path,new_meta:{[t]:e}})}}},v=_,g=(i(48421),i(55610),(0,p.Z)(v,s,o,!1,null,"cd118592",null)),b=g.exports,y={props:{publication:Object,sections:Array,opened_section:Object,opened_section_modules_list:Array,can_edit:Boolean},components:{LayersPane:b,DisplayOnMap:()=>i.e(502).then(i.bind(i,99502))},data(){return{views_list:[{title:"Présentation du territoire",text:"<p>Pellentesque vehicula consequat mi nec efficitur. Etiam nunc massa, congue ut justo ac, cursus fringilla nisi. Aliquam erat volutpat. Integer\n          vulputate hendrerit sodales. Duis varius, purus sit amet varius dapibus, velit est pellentesque lectus, quis auctor orci urna sed sapien. Curabitur\n          at risus quis magna lacinia ultricies. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Fusce fringilla nulla sit amet tempus maximus.\n          </p><p>Etiam bibendum nec metus nec pulvinar. Duis tristique, erat eu ornare tincidunt, ante elit blandit dui, sit amet volutpat massa felis mattis lectus. Vestibulum commodo felis libero, eu convallis mi faucibus vestibulum. Pellentesque condimentum ullamcorper interdum. Duis vel varius diam. Nulla aliquam ipsum nisi, sed vestibulum neque porttitor sit amet. Nullam quis consectetur tellus. Pellentesque mattis eget velit ut elementum. Maecenas tincidunt sollicitudin feugiat. Nam eleifend nisl ut erat blandit, quis bibendum ex gravida. Mauris nec feugiat lacus. Vestibulum gravida dapibus condimentum. Sed eu maximus urna, id rutrum ipsum. Nam vitae velit sem.</p>'",map_center:[5.39057449011251,43.310173305629576],map_zoom:12},{title:"Les point de vue des habitants",text:"<p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Fusce fringilla nulla sit amet tempus maximus.\n        </p>'",map_center:[5.38134192070759,43.27892369030499],map_zoom:16},{title:"Le tissu associatif",text:"<p>Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Fusce fringilla nulla sit amet tempus maximus.\n        </p>'",map_center:[5.331893135466207,43.359606738182094],map_zoom:14}],default_layer_color:"#333",opened_view_id:!1}},i18n:{messages:{fr:{views_list:"Liste des vues"}}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{start_zoom(){return 10},opened_view(){return!1!==this.opened_view_id&&this.views_list[this.opened_view_id]},pins(){return this.sections.reduce(((t,e)=>Array.isArray(e.modules_list)?(e.modules_list.map(((i,n)=>{const a=this.findModuleFromMetaFilename({files:this.publication.$files,meta_filename:i});a&&a.location?.longitude&&a.location?.latitude&&t.push({longitude:a.location.longitude,latitude:a.location.latitude,index:n,label:this.$t("media")+" "+(n+1),color:e.section_color||"#333",path:a.$path})})),t):t),[])}},methods:{openView(t){this.opened_view_id=t,this.$eventHub.$emit("publication.map.navigateTo",{center:this.opened_view.map_center,zoom:this.opened_view.map_zoom})},closeView(){this.opened_view_id=!1,this.$eventHub.$emit("publication.map.navigateTo",{center:this.start_coords,zoom:this.start_zoom})}}},x=y,w=(i(38635),(0,p.Z)(x,n,a,!1,null,"2009e22c",null)),k=w.exports},14962:function(t,e,i){"use strict";i.d(e,{Z:function(){return _}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_moduleCreator"},[t.show_module_selector||!t.is_collapsed?i("div",{staticClass:"_typePicker"},[t.types_available.includes("text")?i("button",{staticClass:"u-button u-button_small u-button_bleumarine",attrs:{type:"button"},on:{click:t.createText}},[i("sl-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{name:"fonts",label:t.$t("add_text")}})],1):t._e(),t.types_available.includes("medias")?i("button",{staticClass:"u-button u-button_small u-button_bleumarine",attrs:{type:"button"},on:{click:function(e){t.show_media_picker=!0}}},[i("sl-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{name:"image",label:t.$t("add_medias")}})],1):t._e(),t.show_media_picker?i("MediaPicker",{attrs:{publication_path:t.publication_path},on:{addMedias:t.createMosaic,close:function(e){t.show_media_picker=!1}}}):t._e(),t.types_available.includes("files")?i("button",{staticClass:"u-button u-button_small u-button_bleumarine",attrs:{type:"button"},on:{click:function(e){t.show_file_picker=!0}}},[i("sl-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{name:"file-earmark-binary-fill",label:t.$t("add_files")}})],1):t._e(),t.show_file_picker?i("MediaPicker",{attrs:{publication_path:t.publication_path},on:{addMedias:t.createFiles,close:function(e){t.show_file_picker=!1}}}):t._e(),t.types_available.includes("link")?i("button",{staticClass:"u-button u-button_small u-button_bleumarine",attrs:{type:"button"},on:{click:function(e){t.show_link_picker=!0}}},[i("sl-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{name:"link",label:t.$t("add_link")}})],1):t._e(),t.show_link_picker?i("LinkPicker",{on:{embed:t.createEmbed,close:function(e){t.show_link_picker=!1}}}):t._e(),t.types_available.includes("shapes")?t._l(t.shapes,(function(e){return i("button",{key:e.type,staticClass:"u-button u-button_small u-button_bleumarine",attrs:{type:"button"},on:{click:function(i){return t.createModule({module_type:e.type,addtl_meta:e.addtl_meta})}}},[i("sl-icon",{staticStyle:{"font-size":"var(--icon-size)"},attrs:{name:e.icon,label:t.$t(e.type)}})],1)})):t._e()],2):t._e(),t.is_collapsed?i("button",{staticClass:"u-button u-button_transparent u-addBtn",style:t.show_module_selector?"transform: rotate(45deg);":"",attrs:{type:"button"},on:{click:function(e){t.show_module_selector=!t.show_module_selector}}},[i("sl-icon",{attrs:{name:"plus-circle"}})],1):t._e(),i("DropZone",{on:{mediaDropped:t.createMosaic}})],1)},a=[],s=(i(57658),i(60674)),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("BaseModal2",{on:{close:function(e){return t.$emit("close")}}},[i("div",{staticClass:"_linkPicker"},[i("div",{staticClass:"_urlBox"},[i("DLabel",{attrs:{str:t.$t("input_url"),instructions:t.$t("input_url_instr")}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.full_url,expression:"full_url"}],attrs:{type:"url",placeholder:"https://"},domProps:{value:t.full_url},on:{input:function(e){e.target.composing||(t.full_url=e.target.value)}}})],1),i("div",{staticClass:"u-instructions"},[t._v(" PeerTube, YouTube, Vimeo, etc. "+t._s(t.$t("for_example"))+"  "),t._l(["https://peertube.fr/w/wB6M6CHdfpWXpozVnqjbde","https://www.youtube.com/watch?v=Bn6zdyCAwJs","https://vimeo.com/447785086","https://observablehq.com/embed/@fil/bertin1953-glsl?cells=canvas"],(function(e,n){return i("button",{key:n,staticClass:"u-buttonLink",attrs:{type:"button"},domProps:{innerHTML:t._s(e)},on:{click:function(i){t.full_url=e}}})}))],2),i("br"),i("div",{key:t.full_url},["any"===t.url_to_site.type?[i("iframe",{staticClass:"_siteIframe",attrs:{src:t.url_to_site.src,frameborder:"0"}})]:i("vue-plyr",[i("div",{staticClass:"plyr__video-embed"},[i("iframe",{attrs:{src:t.url_to_site.src,allowfullscreen:"",allowtransparency:"",allow:"autoplay; fullscreen",sandbox:"allow-same-origin allow-scripts allow-popups",frameborder:"0"}})])])],2),i("br"),t.full_url?i("div",{staticClass:"_selectBtn"},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),i("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){return t.$emit("embed",t.full_url)}}},[t._v(" "+t._s(t.$t("embed"))+" ")])]):t._e()])])},r=[],l={props:{},components:{},data(){return{full_url:"https://"}},async created(){},beforeDestroy(){},watch:{},computed:{url_to_site(){return!!this.full_url&&this.transformURL({url:this.full_url,autoplay:!1})}},methods:{}},c=l,u=(i(20148),i(1001)),d=(0,u.Z)(c,o,r,!1,null,"a5930508",null),h=d.exports,p={props:{publication_path:String,addtl_meta:Object,context:String,types_available:{type:Array,default:()=>["text","medias","files","link","shapes"]},is_collapsed:{type:Boolean,default:!0}},components:{MediaPicker:s.Z,LinkPicker:h},data(){return{show_module_selector:!1,show_media_picker:!1,show_file_picker:!1,show_link_picker:!1,shapes:[{type:"ellipsis",icon:"circle-fill",addtl_meta:{background_color:"#1d327f"}},{type:"rectangle",icon:"square-fill",addtl_meta:{background_color:"#ffbe32"}},{type:"line",icon:"dash-lg",addtl_meta:{outline_width:1,outline_color:"#000000"}},{type:"arrow",icon:"arrow-right-square",addtl_meta:{outline_width:1,outline_color:"#000000"}}],is_saving:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async createMosaic({meta_filename:t,path_to_source_media_metas:e}){let i=[];if(t?i.push({meta_filename:t}):e&&e.map((t=>{const e=this.getFilename(t);i.push({meta_filename_in_project:e})})),"page_by_page"===this.context&&(i=i.map((t=>(t.objectFit="contain",t)))),"page_by_page"===this.context||"cartography"===this.context)for(const n of i){const t=this.getSourceMedia({source_media:n,folder_path:this.publication_path});let e={};"page_by_page"===this.context&&t?.$infos?.ratio&&(e.height=this.$root.default_new_module_width*t.$infos.ratio),"cartography"===this.context&&t?.$infos?.gps&&(e.location=t.$infos.gps),await this.createModule({module_type:"mosaic",source_medias:[n],addtl_meta:e})}else await this.createModule({module_type:"mosaic",source_medias:i});this.show_media_picker=!1},async createEmbed(t){const e="url-"+ +new Date+".txt",i=await this.$api.uploadText({path:this.publication_path,filename:e,content:t,additional_meta:{module_type:this.module_type,$type:"url"}});this.createMosaic({meta_filename:i})},async createFiles({path_to_source_media_metas:t}){let e=[];t.map((t=>{const i=this.getFilename(t);e.push({meta_filename_in_project:i})})),await this.createModule({module_type:"files",source_medias:e}),this.show_file_picker=!1},async createText(){const t="text-"+ +new Date+".txt",e=await this.$api.uploadText({path:this.publication_path,filename:t,content:"",additional_meta:{module_type:this.module_type}}),i=[{meta_filename:e}];await this.createModule({module_type:"text",source_medias:i})},async createModule({module_type:t,source_medias:e=[],addtl_meta:i={}}){const n=await this.createMetaForModule({module_type:t,source_medias:e,addtl_meta:i});this.$emit("addModule",{meta_filename:n}),this.show_module_selector=!1},async createMetaForModule({module_type:t,source_medias:e,addtl_meta:i}){let n={module_type:t,source_medias:e,requested_slug:"module"};return this.addtl_meta&&Object.assign(n,this.addtl_meta),i&&Object.assign(n,i),await this.$api.uploadFile({path:this.publication_path,additional_meta:n}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))}}},f=p,m=(i(37881),(0,u.Z)(f,n,a,!1,null,"47339e53",null)),_=m.exports},84421:function(t,e,i){"use strict";i.r(e);var n=i(8081),a=i.n(n),s=i(23645),o=i.n(s),r=o()(a());r.push([t.id,"._linkPicker[data-v-a5930508]{width:100%;margin:0 auto}._addMediaBtn[data-v-a5930508]{text-align:center;padding:calc(var(--spacing)*1)}._selectBtn[data-v-a5930508]{display:flex;place-items:center;justify-content:center;width:100%;gap:calc(var(--spacing)/1);background:#fff}iframe[data-v-a5930508]{width:100%;aspect-ratio:4/3}",""]),e["default"]=r},50136:function(t,e,i){"use strict";i.r(e);var n=i(8081),a=i.n(n),s=i(23645),o=i.n(s),r=o()(a());r.push([t.id,"._layersPane[data-v-cd118592]{position:relative;width:320px}._list[data-v-cd118592]{color:#000}._openedLayer[data-v-cd118592]{position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:hsla(0,0%,91%,.7)}._openedLayer[data-v-cd118592],._openedLayer--content[data-v-cd118592]{overflow:auto;padding:calc(var(--spacing)*1)}._openedLayer--content[data-v-cd118592]{height:100%;background:#fff}._openedLayer--content ._title[data-v-cd118592]{margin-bottom:calc(var(--spacing)*1)}._closeLayerBtn[data-v-cd118592],._repickNotice[data-v-cd118592]{position:absolute;top:0;right:0}._repickNotice[data-v-cd118592]{z-index:1;left:0;bottom:0;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:hsla(0,0%,91%,.7);padding:calc(var(--spacing)*1)}",""]),e["default"]=r},77870:function(t,e,i){"use strict";i.r(e);var n=i(8081),a=i.n(n),s=i(23645),o=i.n(s),r=o()(a());r.push([t.id,"._summaryItem{z-index:10000;display:flex;flex-flow:row wrap;align-items:center;padding:calc(var(--spacing)/4);gap:calc(var(--spacing)/4)}._summaryItem ._clickZone{text-decoration:underline;text-underline-offset:.2em;cursor:pointer}._summaryItem ._clickZone:focus-visible,._summaryItem ._clickZone:hover{background:var(--c-gris_clair)}._summaryItem ._colorInd{width:1em;height:1em}._summaryItem ._title{padding:calc(var(--spacing)/8) calc(var(--spacing)/4);border-radius:2px}._summaryItem.is--active ._title{background:var(--c-bleumarine);color:#fff}",""]),e["default"]=r},84471:function(t,e,i){"use strict";i.r(e);var n=i(8081),a=i.n(n),s=i(23645),o=i.n(s),r=o()(a());r.push([t.id,"._mapModule[data-v-a91cee24]{background:var(--c-gris);border-radius:2px;padding:calc(var(--spacing)/2);margin:calc(var(--spacing)/8) 0;display:flex;align-items:center;gap:calc(var(--spacing)/2);cursor:pointer}._mapModule[data-v-a91cee24] :focus-visible,._mapModule[data-v-a91cee24]:hover{background:transparent}",""]),e["default"]=r},7093:function(t,e,i){"use strict";i.r(e);var n=i(8081),a=i.n(n),s=i(23645),o=i.n(s),r=o()(a());r.push([t.id,"._mapView[data-v-2009e22c]{width:100%;height:80vh;background:var(--c-gris);border-radius:4px;overflow:hidden;display:flex;flex-flow:row wrap}._mapContainer[data-v-2009e22c]{height:100%}._textContainer[data-v-2009e22c]{position:relative;height:100%;flex:1 1 200px;max-width:320px;background:var(--panel-color);border:var(--panel-borders);box-shadow:var(--panel-shadows);text-align:left}._textContainer[data-v-2009e22c],._viewPreview[data-v-2009e22c]{padding:calc(var(--spacing)/2)}._viewPreview[data-v-2009e22c]{background:var(--c-gris_clair);margin-bottom:calc(var(--spacing)/2);display:flex;align-items:center;gap:calc(var(--spacing)/2)}._viewPreview[data-v-2009e22c]:hover{background:var(--c-gris_fonce)}._openedView[data-v-2009e22c]{position:absolute;top:calc(var(--spacing)/4);left:calc(var(--spacing)/4);width:calc(100% - var(--spacing)/2);height:100%;overflow:auto;background:#fff;padding:calc(var(--spacing)/2)}._closeBtn[data-v-2009e22c]{position:absolute;top:0;right:0}",""]),e["default"]=r},6447:function(t,e,i){"use strict";i.r(e);var n=i(8081),a=i.n(n),s=i(23645),o=i.n(s),r=o()(a());r.push([t.id,"._moduleCreator[data-v-47339e53]{position:relative;display:flex;justify-content:center;align-items:center;width:100%;pointer-events:none;color:var(--c-bleuvert);border-radius:1rem;--icon-size:1.2rem}._moduleCreator>*[data-v-47339e53]{pointer-events:auto}._typePicker[data-v-47339e53]{display:flex;flex-flow:row wrap;justify-content:flex-start;gap:calc(var(--spacing)/4)}._dropNotice[data-v-47339e53]{pointer-events:none}sl-icon-button[data-v-47339e53]::part(base){font-size:1.5em;color:var(--c-bleuvert)}._showModuleSelector[data-v-47339e53]{transition:all .4s cubic-bezier(.19,1,.22,1)}",""]),e["default"]=r},55656:function(t,e,i){i(21703),i(57658),function(t,i){i(e)}(0,(function(t){"use strict";var e={inject:["manager"],props:{index:{type:Number,required:!0},collection:{type:[String,Number],default:"default"},disabled:{type:Boolean,default:!1}},mounted:function(){var t=this.$props,e=t.collection,i=t.disabled,n=t.index;i||this.setDraggable(e,n)},watch:{index:function(t){this.$el&&this.$el.sortableInfo&&(this.$el.sortableInfo.index=t)},disabled:function(t){t?this.removeDraggable(this.collection):this.setDraggable(this.collection,this.index)},collection:function(t,e){this.removeDraggable(e),this.setDraggable(t,this.index)}},beforeDestroy:function(){var t=this.collection,e=this.disabled;e||this.removeDraggable(t)},methods:{setDraggable:function(t,e){var i=this.$el;i.sortableInfo={index:e,collection:t,manager:this.manager},this.ref={node:i},this.manager.add(t,this.ref)},removeDraggable:function(t){this.manager.remove(t,this.ref)}}},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0)if(i.push(o.value),e&&i.length===e)break}catch(l){a=!0,s=l}finally{try{!n&&r["return"]&&r["return"]()}finally{if(a)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},o=function(){function t(){i(this,t),this.refs={}}return n(t,[{key:"add",value:function(t,e){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(e)}},{key:"remove",value:function(t,e){var i=this.getIndex(t,e);-1!==i&&this.refs[t].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find((function(e){var i=e.node;return i.sortableInfo.index==t.active.index}))}},{key:"getIndex",value:function(t,e){return this.refs[t].indexOf(e)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[t].sort((function(t,e){return t.node.sortableInfo.index-e.node.sortableInfo.index}))}}]),t}();function r(t,e,i){var n=t.slice(0);if(i>=n.length){var a=i-n.length;while(1+a--)n.push(void 0)}return n.splice(i,0,n.splice(e,1)[0]),n}var l={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]},c=function(){if("undefined"===typeof window||"undefined"===typeof document)return"";var t=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];switch(e){case"ms":return"ms";default:return e&&e.length?e[0].toUpperCase()+e.substr(1):""}}();function u(t,e){while(t){if(e(t))return t;t=t.parentNode}}function d(t,e,i){return i<t?t:i>e?e:i}function h(t){return"px"===t.substr(-2)?parseFloat(t):0}function p(t){var e=window.getComputedStyle(t);return{top:h(e.marginTop),right:h(e.marginRight),bottom:h(e.marginBottom),left:h(e.marginLeft)}}var f={data:function(){return{sorting:!1,sortingIndex:null,manager:new o,events:{start:this.handleStart,move:this.handleMove,end:this.handleEnd}}},props:{value:{type:Array,required:!0},axis:{type:String,default:"y"},distance:{type:Number,default:0},pressDelay:{type:Number,default:0},pressThreshold:{type:Number,default:5},useDragHandle:{type:Boolean,default:!1},useWindowAsScrollContainer:{type:Boolean,default:!1},hideSortableGhost:{type:Boolean,default:!0},lockToContainerEdges:{type:Boolean,default:!1},lockOffset:{type:[String,Number,Array],default:"50%"},transitionDuration:{type:Number,default:300},appendTo:{type:String,default:"body"},draggedSettlingDuration:{type:Number,default:null},lockAxis:String,helperClass:String,contentWindow:Object,shouldCancelStart:{type:Function,default:function(t){var e=["input","textarea","select","option","button"];return-1!==e.indexOf(t.target.tagName.toLowerCase())}},getHelperDimensions:{type:Function,default:function(t){var e=t.node;return{width:e.offsetWidth,height:e.offsetHeight}}}},provide:function(){return{manager:this.manager}},mounted:function(){var t=this;this.container=this.$el,this.document=this.container.ownerDocument||document,this._window=this.contentWindow||window,this.scrollContainer=this.useWindowAsScrollContainer?this.document.body:this.container;var e=function(e){t.events.hasOwnProperty(e)&&l[e].forEach((function(i){return t.container.addEventListener(i,t.events[e],{passive:!0})}))};for(var i in this.events)e(i)},beforeDestroy:function(){var t=this,e=function(e){t.events.hasOwnProperty(e)&&l[e].forEach((function(i){return t.container.removeEventListener(i,t.events[e])}))};for(var i in this.events)e(i)},methods:{handleStart:function(t){var e=this,i=this.$props,n=i.distance,a=i.shouldCancelStart;if(2===t.button||a(t))return!1;this._touched=!0,this._pos=this.getOffset(t);var s=u(t.target,(function(t){return null!=t.sortableInfo}));if(s&&s.sortableInfo&&this.nodeIsChild(s)&&!this.sorting){var o=this.$props.useDragHandle,r=s.sortableInfo,l=r.index,c=r.collection;if(o&&!u(t.target,(function(t){return null!=t.sortableHandle})))return;this.manager.active={index:l,collection:c},"a"===t.target.tagName.toLowerCase()&&t.preventDefault(),n||(0===this.$props.pressDelay?this.handlePress(t):this.pressTimer=setTimeout((function(){return e.handlePress(t)}),this.$props.pressDelay))}},nodeIsChild:function(t){return t.sortableInfo.manager===this.manager},handleMove:function(t){var e=this.$props,i=e.distance,n=e.pressThreshold;if(!this.sorting&&this._touched){var a=this.getOffset(t);this._delta={x:this._pos.x-a.x,y:this._pos.y-a.y};var s=Math.abs(this._delta.x)+Math.abs(this._delta.y);i||n&&!(n&&s>=n)?i&&s>=i&&this.manager.isActive()&&this.handlePress(t):(clearTimeout(this.cancelTimer),this.cancelTimer=setTimeout(this.cancel,0))}},handleEnd:function(){var t=this.$props.distance;this._touched=!1,t||this.cancel()},cancel:function(){this.sorting||(clearTimeout(this.pressTimer),this.manager.active=null)},handlePress:function(t){var e=this;t.stopPropagation();var i=this.manager.getActive();if(i){var n=this.$props,a=n.axis,o=n.getHelperDimensions,r=n.helperClass,c=n.hideSortableGhost,u=n.useWindowAsScrollContainer,d=n.appendTo,h=i.node,f=i.collection,m=h.sortableInfo.index,_=p(h),v=this.container.getBoundingClientRect(),g=o({index:m,node:h,collection:f});this.node=h,this.margin=_,this.width=g.width,this.height=g.height,this.marginOffset={x:this.margin.left+this.margin.right,y:Math.max(this.margin.top,this.margin.bottom)},this.boundingClientRect=h.getBoundingClientRect(),this.containerBoundingRect=v,this.index=m,this.newIndex=m,this._axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},this.offsetEdge=this.getEdgeOffset(h),this.initialOffset=this.getOffset(t),this.initialScroll={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft},this.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset};var b,y=h.querySelectorAll("input, textarea, select"),x=h.cloneNode(!0),w=[].concat(s(x.querySelectorAll("input, textarea, select")));if(w.forEach((function(t,e){"file"!==t.type&&y[e]&&(t.value=y[e].value)})),this.helper=this.document.querySelector(d).appendChild(x),this.helper.style.position="fixed",this.helper.style.top=this.boundingClientRect.top-_.top+"px",this.helper.style.left=this.boundingClientRect.left-_.left+"px",this.helper.style.width=this.width+"px",this.helper.style.height=this.height+"px",this.helper.style.boxSizing="border-box",this.helper.style.pointerEvents="none",c&&(this.sortableGhost=h,h.style.visibility="hidden",h.style.opacity=0),this.translate={},this.minTranslate={},this.maxTranslate={},this._axis.x&&(this.minTranslate.x=(u?0:v.left)-this.boundingClientRect.left-this.width/2,this.maxTranslate.x=(u?this._window.innerWidth:v.left+v.width)-this.boundingClientRect.left-this.width/2),this._axis.y&&(this.minTranslate.y=(u?0:v.top)-this.boundingClientRect.top-this.height/2,this.maxTranslate.y=(u?this._window.innerHeight:v.top+v.height)-this.boundingClientRect.top-this.height/2),r)(b=this.helper.classList).add.apply(b,s(r.split(" ")));this.listenerNode=t.touches?h:this._window,l.move.forEach((function(t){return e.listenerNode.addEventListener(t,e.handleSortMove,!1)})),l.end.forEach((function(t){return e.listenerNode.addEventListener(t,e.handleSortEnd,!1)})),this.sorting=!0,this.sortingIndex=m,this.$emit("sort-start",{event:t,node:h,index:m,collection:f})}},handleSortMove:function(t){t.preventDefault(),this.updatePosition(t),this.animateNodes(),this.autoscroll(),this.$emit("sort-move",{event:t})},handleSortEnd:function(t){var e=this,i=this.manager.active.collection;this.listenerNode&&(l.move.forEach((function(t){return e.listenerNode.removeEventListener(t,e.handleSortMove)})),l.end.forEach((function(t){return e.listenerNode.removeEventListener(t,e.handleSortEnd)})));var n=this.manager.refs[i],a=function(){e.helper.parentNode.removeChild(e.helper),e.hideSortableGhost&&e.sortableGhost&&(e.sortableGhost.style.visibility="",e.sortableGhost.style.opacity="");for(var a=0,s=n.length;a<s;a++){var o=n[a],l=o.node;o.edgeOffset=null,l.style[c+"Transform"]="",l.style[c+"TransitionDuration"]=""}clearInterval(e.autoscrollInterval),e.autoscrollInterval=null,e.manager.active=null,e.sorting=!1,e.sortingIndex=null,e.$emit("sort-end",{event:t,oldIndex:e.index,newIndex:e.newIndex,collection:i}),e.$emit("input",r(e.value,e.index,e.newIndex)),e._touched=!1};this.$props.transitionDuration||this.$props.draggedSettlingDuration?this.transitionHelperIntoPlace(n).then((function(){return a()})):a()},transitionHelperIntoPlace:function(t){var e=this;if(0===this.$props.draggedSettlingDuration||0===t.length)return Promise.resolve();var i={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},n=t[this.index].node,a=t[this.newIndex].node,s=-i.left;this.translate&&this.translate.x>0?s+=a.offsetLeft+a.offsetWidth-(n.offsetLeft+n.offsetWidth):s+=a.offsetLeft-n.offsetLeft;var o=-i.top;this.translate&&this.translate.y>0?o+=a.offsetTop+a.offsetHeight-(n.offsetTop+n.offsetHeight):o+=a.offsetTop-n.offsetTop;var r=null!==this.$props.draggedSettlingDuration?this.$props.draggedSettlingDuration:this.$props.transitionDuration;return this.helper.style[c+"Transform"]="translate3d("+s+"px,"+o+"px, 0)",this.helper.style[c+"TransitionDuration"]=r+"ms",new Promise((function(t){var i=function(i){i&&"transform"!==i.propertyName||(clearTimeout(n),e.helper.style[c+"Transform"]="",e.helper.style[c+"TransitionDuration"]="",t())},n=setTimeout(i,r+10);e.helper.addEventListener("transitionend",i,!1)}))},getEdgeOffset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,left:0};if(t){var i={top:e.top+t.offsetTop,left:e.left+t.offsetLeft};return t.parentNode!==this.container?this.getEdgeOffset(t.parentNode,i):i}},getOffset:function(t){var e=t.touches?t.touches[0]:t,i=e.pageX,n=e.pageY;return{x:i,y:n}},getLockPixelOffsets:function(){var t=this.$props.lockOffset;if(Array.isArray(this.lockOffset)||(t=[t,t]),2!==t.length)throw new Error("lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given "+t);var e=t,i=a(e,2),n=i[0],s=i[1];return[this.getLockPixelOffset(n),this.getLockPixelOffset(s)]},getLockPixelOffset:function(t){var e=t,i=t,n="px";if("string"===typeof t){var a=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);if(null===a)throw new Error('lockOffset value should be a number or a string of a number followed by "px" or "%". Given '+t);e=i=parseFloat(t),n=a[1]}if(!isFinite(e)||!isFinite(i))throw new Error("lockOffset value should be a finite. Given "+t);return"%"===n&&(e=e*this.width/100,i=i*this.height/100),{x:e,y:i}},updatePosition:function(t){var e=this.$props,i=e.lockAxis,n=e.lockToContainerEdges,s=this.getOffset(t),o={x:s.x-this.initialOffset.x,y:s.y-this.initialOffset.y};if(o.y-=window.pageYOffset-this.initialWindowScroll.top,o.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=o,n){var r=this.getLockPixelOffsets(),l=a(r,2),u=l[0],h=l[1],p={x:this.width/2-u.x,y:this.height/2-u.y},f={x:this.width/2-h.x,y:this.height/2-h.y};o.x=d(this.minTranslate.x+p.x,this.maxTranslate.x-f.x,o.x),o.y=d(this.minTranslate.y+p.y,this.maxTranslate.y-f.y,o.y)}"x"===i?o.y=0:"y"===i&&(o.x=0),this.helper.style[c+"Transform"]="translate3d("+o.x+"px,"+o.y+"px, 0)"},animateNodes:function(){var t=this.$props,e=t.transitionDuration,i=t.hideSortableGhost,n=this.manager.getOrderedRefs(),a={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},s={left:this.offsetEdge.left+this.translate.x+a.left,top:this.offsetEdge.top+this.translate.y+a.top},o={top:window.pageYOffset-this.initialWindowScroll.top,left:window.pageXOffset-this.initialWindowScroll.left};this.newIndex=null;for(var r=0,l=n.length;r<l;r++){var u=n[r].node,d=u.sortableInfo.index,h=u.offsetWidth,p=u.offsetHeight,f={width:this.width>h?h/2:this.width/2,height:this.height>p?p/2:this.height/2},m={x:0,y:0},_=n[r].edgeOffset;_||(n[r].edgeOffset=_=this.getEdgeOffset(u));var v=r<n.length-1&&n[r+1],g=r>0&&n[r-1];v&&!v.edgeOffset&&(v.edgeOffset=this.getEdgeOffset(v.node)),d!==this.index?(e&&(u.style[c+"TransitionDuration"]=e+"ms"),this._axis.x?this._axis.y?d<this.index&&(s.left+o.left-f.width<=_.left&&s.top+o.top<=_.top+f.height||s.top+o.top+f.height<=_.top)?(m.x=this.width+this.marginOffset.x,_.left+m.x>this.containerBoundingRect.width-f.width&&(m.x=v.edgeOffset.left-_.left,m.y=v.edgeOffset.top-_.top),null===this.newIndex&&(this.newIndex=d)):d>this.index&&(s.left+o.left+f.width>=_.left&&s.top+o.top+f.height>=_.top||s.top+o.top+f.height>=_.top+p)&&(m.x=-(this.width+this.marginOffset.x),_.left+m.x<this.containerBoundingRect.left+f.width&&(m.x=g.edgeOffset.left-_.left,m.y=g.edgeOffset.top-_.top),this.newIndex=d):d>this.index&&s.left+o.left+f.width>=_.left?(m.x=-(this.width+this.marginOffset.x),this.newIndex=d):d<this.index&&s.left+o.left<=_.left+f.width&&(m.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=d)):this._axis.y&&(d>this.index&&s.top+o.top+f.height>=_.top?(m.y=-(this.height+this.marginOffset.y),this.newIndex=d):d<this.index&&s.top+o.top<=_.top+f.height&&(m.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=d))),u.style[c+"Transform"]="translate3d("+m.x+"px,"+m.y+"px,0)"):i&&(this.sortableGhost=u,u.style.visibility="hidden",u.style.opacity=0)}null==this.newIndex&&(this.newIndex=this.index)},autoscroll:function(){var t=this,e=this.translate,i={x:0,y:0},n={x:1,y:1},a={x:10,y:10};e.y>=this.maxTranslate.y-this.height/2?(i.y=1,n.y=a.y*Math.abs((this.maxTranslate.y-this.height/2-e.y)/this.height)):e.x>=this.maxTranslate.x-this.width/2?(i.x=1,n.x=a.x*Math.abs((this.maxTranslate.x-this.width/2-e.x)/this.width)):e.y<=this.minTranslate.y+this.height/2?(i.y=-1,n.y=a.y*Math.abs((e.y-this.height/2-this.minTranslate.y)/this.height)):e.x<=this.minTranslate.x+this.width/2&&(i.x=-1,n.x=a.x*Math.abs((e.x-this.width/2-this.minTranslate.x)/this.width)),this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null,this.isAutoScrolling=!1),0===i.x&&0===i.y||(this.autoscrollInterval=setInterval((function(){t.isAutoScrolling=!0;var e={left:1*n.x*i.x,top:1*n.y*i.y};t.scrollContainer.scrollTop+=e.top,t.scrollContainer.scrollLeft+=e.left,t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()}),5))}}},m={bind:function(t){t.sortableHandle=!0}};function _(t,e){return{name:t,mixins:[e],props:{tag:{type:String,default:"div"}},render:function(t){return t(this.tag,this.$slots.default)}}}var v=_("slick-list",f),g=_("slick-item",e);t.ElementMixin=e,t.ContainerMixin=f,t.HandleDirective=m,t.SlickList=v,t.SlickItem=g,t.arrayMove=r,Object.defineProperty(t,"__esModule",{value:!0})}))},20148:function(t,e,i){var n=i(84421);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(31982).Z;a("d9648a00",n,!0,{sourceMap:!1,shadowMode:!1})},48421:function(t,e,i){var n=i(50136);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(31982).Z;a("2ec0a112",n,!0,{sourceMap:!1,shadowMode:!1})},55610:function(t,e,i){var n=i(77870);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(31982).Z;a("97ac146a",n,!0,{sourceMap:!1,shadowMode:!1})},21493:function(t,e,i){var n=i(84471);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(31982).Z;a("fb7efe26",n,!0,{sourceMap:!1,shadowMode:!1})},38635:function(t,e,i){var n=i(7093);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(31982).Z;a("e1a95ff4",n,!0,{sourceMap:!1,shadowMode:!1})},37881:function(t,e,i){var n=i(6447);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=i(31982).Z;a("1d155529",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=841.js.map